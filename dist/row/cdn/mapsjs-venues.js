/**!
 * The code below uses open source software. Please visit the URL below for an overview of the licenses: 
 * https://sdk.venues.here.com/v3/3.1/HERE_NOTICE 
 */
this.H=this.H||{},this.H.venues=function(e){"use strict";function D(e,t){var n,r,t=(t=void 0===t?{}:t).insertAt;e&&"undefined"!=typeof document&&(n=document.head||document.getElementsByTagName("head")[0],(r=document.createElement("style")).type="text/css","top"===t&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)))}function G(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach(function(e){c(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function z(e,t,n){return(z=V()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);t=new(Function.bind.apply(e,r));return n&&R(t,n.prototype),t}).apply(null,arguments)}function B(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},i=Object.keys(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(n){var r=V();return function(){var e,t=o(n),t=(e=r?(e=o(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return U(t)}}function Y(){return(Y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(r)return r=Object.getOwnPropertyDescriptor(r,t),r.get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}D(".H_l_right .venues-ui__drawings .trigger.button--active .arrow {\n  transform: rotate(90deg);\n}\n.H_l_right .venues-ui__drawings .drawings {\n  right: 45px;\n  left: initial;\n}");var J=function(){d(r,H.map.Feature);var n=h(r);function r(e){var t;return u(this,r),(t=n.call(this)).id=e.id,t.model=e,t}return l(r,[{key:"getData",value:function(){return this.model}},{key:"getAddress",value:function(){return this.model.getInternalAddress()}},{key:"getCenter",value:function(){var e=v(this.model.getCenter(),2),t=e[0],e=e[1];return new H.geo.Point(e,t)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"toGeoJSON",value:function(){return this.model.toJSON()}},{key:"getLevel",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getLevel().getDrawing().getParentEventTarget()}}]),r}(),X=function(){d(r,H.map.Feature);var n=h(r);function r(e){var t;return u(this,r),(t=n.call(this)).id=e.id,t.model=e,t}return l(r,[{key:"getData",value:function(){return this.model}},{key:"getBoundingBox",value:function(){return z(H.geo.Rect,f(this.model.getBoundingBox()))}},{key:"getCenter",value:function(){var e=v(this.model.getCenter(),2),t=e[0],e=e[1];return new H.geo.Point(e,t)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getLevel",value:function(t){return this.getLevels().find(function(e){return e.getIdentifier()===t})}},{key:"getLevels",value:function(){var t=this.getData().getLevels().map(function(e){return e.getIdentifier()});return this.getVenue().getLevels().filter(function(e){return-1!==t.indexOf(e.id)})}},{key:"getMainLevel",value:function(){return this.getLevel(this.model.getMainLevel().getIdentifier())}},{key:"getVenue",value:function(){return this.getParentEventTarget()}}]),r}(),K=function(){d(r,H.map.Feature);var n=h(r);function r(e){var t;return u(this,r),(t=n.call(this)).id=e.id,t.model=e,t}return l(r,[{key:"getGeometry",value:function(t){return this.getGeometries().find(function(e){return e.getIdentifier()===t})}},{key:"getGeometries",value:function(){var t=this.getData().getGeometries().map(function(e){return e.getIdentifier()});return this.getDrawing().getVenue().getGeometries().filter(function(e){return-1!==t.indexOf(e.id)})}},{key:"getData",value:function(){return this.model}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getShortName",value:function(){return this.model.getShortName()}},{key:"getZIndex",value:function(){return this.model.getZIndex()}},{key:"isMain",value:function(){return this.model.isMain()}},{key:"getDrawing",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getDrawing().getParentEventTarget()}}]),r}();function Q(e,t,n,r){for(var i,o=r,a=n-t>>1,s=n-t,u=e[t],l=e[t+1],c=e[n],d=e[n+1],h=t+3;h<n;h+=3){var p=function(e,t,n,r,i,o){var a=i-n,s=o-r;{var u;0===a&&0===s||(1<(u=((e-n)*a+(t-r)*s)/(a*a+s*s))?(n=i,r=o):0<u&&(n+=a*u,r+=s*u))}return(a=e-n)*a+(s=t-r)*s}(e[h],e[h+1],u,l,c,d);o<p?(i=h,o=p):p===o&&(p=Math.abs(h-a))<s&&(i=h,s=p)}r<o&&(3<i-t&&Q(e,t,i,r),e[i+2]=o,3<n-i&&Q(e,i,n,r))}function L(e,t,n,r){var e={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},i=e,o=i.geometry,t=i.type;if("Point"===t||"MultiPoint"===t||"LineString"===t)q(i,o);else if("Polygon"===t||"MultiLineString"===t)for(var a=0;a<o.length;a++)q(i,o[a]);else if("MultiPolygon"===t)for(a=0;a<o.length;a++)for(var s=0;s<o[a].length;s++)q(i,o[a][s]);return e}function q(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function p(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=t.id;if(n.promoteId?u=t.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)$(i,s);else if("MultiPoint"===o)for(var l=0;l<i.length;l++)$(i[l],s);else if("LineString"===o)ee(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(l=0;l<i.length;l++)ee(i[l],s=[],a,!1),e.push(L(u,"LineString",s,t.properties));return}te(i,s,a,!1)}else if("Polygon"===o)te(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(l=0;l<t.geometry.geometries.length;l++)p(e,{id:u,geometry:t.geometry.geometries[l],properties:t.properties},n,r);return}for(l=0;l<i.length;l++){var c=[];te(i[l],c,a,!0),s.push(c)}}e.push(L(u,o,s,t.properties))}}function $(e,t){t.push(ne(e[0])),t.push(re(e[1])),t.push(0)}function ee(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var u=ne(e[s][0]),l=re(e[s][1]);t.push(u),t.push(l),t.push(0),0<s&&(a+=r?(i*l-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-o,2))),i=u,o=l}var c=t.length-3;t[2]=1,Q(t,0,c,n),t[2+c]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function te(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];ee(e[i],o,n,r),t.push(o)}}function ne(e){return e/360+.5}function re(e){e=Math.sin(e*Math.PI/180),e=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return e<0?0:1<e?1:e}function M(e,t,n,r,i,o,a,s){if(r/=t,(n/=t)<=o&&a<r)return e;if(a<n||r<=o)return null;for(var u=[],l=0;l<e.length;l++){var c=e[l],d=c.geometry,h=c.type,p=0===i?c.minX:c.minY,g=0===i?c.maxX:c.maxY;if(n<=p&&g<r)u.push(c);else if(!(g<n||r<=p)){var v=[];if("Point"===h||"MultiPoint"===h){M=_=E=I=m=y=f=void 0;for(var f=d,y=v,m=n,I=r,E=i,_=0;_<f.length;_+=3){var M=f[_+E];m<=M&&M<=I&&(y.push(f[_]),y.push(f[_+1]),y.push(f[_+2]))}}else if("LineString"===h)ie(d,v,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===h)ae(d,v,n,r,i,!1);else if("Polygon"===h)ae(d,v,n,r,i,!0);else if("MultiPolygon"===h)for(var S=0;S<d.length;S++){var b=[];ae(d[S],b,n,r,i,!0),b.length&&v.push(b)}if(v.length)if(s.lineMetrics&&"LineString"===h)for(S=0;S<v.length;S++)u.push(L(c.id,h,v[S],c.tags));else"LineString"!==h&&"MultiLineString"!==h||(1===v.length?(h="LineString",v=v[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===v.length?"Point":"MultiPoint"),u.push(L(c.id,h,v,c.tags))}}return u.length?u:null}function ie(e,t,n,r,i,o,a){for(var s,u,l=oe(e),c=0===i?ue:le,d=e.start,h=0;h<e.length-3;h+=3){var p=e[h],g=e[h+1],v=e[h+2],f=e[h+3],y=e[h+4],m=0===i?p:g,I=0===i?f:y,E=!1;a&&(s=Math.sqrt(Math.pow(p-f,2)+Math.pow(g-y,2))),m<n?n<I&&(u=c(l,p,g,f,y,n),a&&(l.start=d+s*u)):r<m?I<r&&(u=c(l,p,g,f,y,r),a&&(l.start=d+s*u)):se(l,p,g,v),I<n&&n<=m&&(u=c(l,p,g,f,y,n),E=!0),r<I&&m<=r&&(u=c(l,p,g,f,y,r),E=!0),!o&&E&&(a&&(l.end=d+s*u),t.push(l),l=oe(e)),a&&(d+=s)}var _=e.length-3,p=e[_],g=e[1+_],v=e[2+_];n<=(m=0===i?p:g)&&m<=r&&se(l,p,g,v),_=l.length-3,o&&3<=_&&(l[_]!==l[0]||l[1+_]!==l[1])&&se(l,l[0],l[1],l[2]),l.length&&t.push(l)}function oe(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ae(e,t,n,r,i,o){for(var a=0;a<e.length;a++)ie(e[a],t,n,r,i,o,!1)}function se(e,t,n,r){e.push(t),e.push(n),e.push(r)}function ue(e,t,n,r,i,o){r=(o-t)/(r-t);return e.push(o),e.push(n+(i-n)*r),e.push(1),r}function le(e,t,n,r,i,o){i=(o-n)/(i-n);return e.push(t+(r-t)*i),e.push(o),e.push(1),i}function ce(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=i.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)a=de(i.geometry,t);else if("MultiLineString"===o||"Polygon"===o)for(var a=[],s=0;s<i.geometry.length;s++)a.push(de(i.geometry[s],t));else if("MultiPolygon"===o)for(a=[],s=0;s<i.geometry.length;s++){for(var u=[],l=0;l<i.geometry[s].length;l++)u.push(de(i.geometry[s][l],t));a.push(u)}n.push(L(i.id,o,a,i.tags))}return n}function de(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function he(e,t){if(!e.transformed){for(var n,r=1<<e.z,i=e.x,o=e.y,a=0;a<e.features.length;a++){var s=e.features[a],u=s.geometry,l=s.type;if(s.geometry=[],1===l)for(n=0;n<u.length;n+=2)s.geometry.push(pe(u[n],u[n+1],t,r,i,o));else for(n=0;n<u.length;n++){for(var c=[],d=0;d<u[n].length;d+=2)c.push(pe(u[n][d],u[n][d+1],t,r,i,o));s.geometry.push(c)}}e.transformed=!0}return e}function pe(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function ge(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,d=I=m=y=f=v=g=p=h=d=c=l=u=void 0;var u=a,l=e[s],c=o,d=i,h=l.geometry,p=l.type,g=[];if("Point"===p||"MultiPoint"===p)for(var v=0;v<h.length;v+=3)g.push(h[v]),g.push(h[v+1]),u.numPoints++,u.numSimplified++;else if("LineString"===p)ve(g,h,u,c,!1,!1);else if("MultiLineString"===p||"Polygon"===p)for(v=0;v<h.length;v++)ve(g,h[v],u,c,"Polygon"===p,0===v);else if("MultiPolygon"===p)for(var f=0;f<h.length;f++){var y=h[f];for(v=0;v<y.length;v++)ve(g,y[v],u,c,!0,0===v)}if(g.length){var m=l.tags||null;if("LineString"===p&&d.lineMetrics){for(var I in m={},l.tags)m[I]=l.tags[I];m.mapbox_clip_start=h.start/h.size,m.mapbox_clip_end=h.end/h.size}d={geometry:g,type:"Polygon"===p||"MultiPolygon"===p?3:"LineString"===p||"MultiLineString"===p?2:1,tags:m};null!==l.id&&(d.id=l.id),u.features.push(d)}var d=e[s].minX,E=e[s].minY,_=e[s].maxX,M=e[s].maxY;d<a.minX&&(a.minX=d),E<a.minY&&(a.minY=E),_>a.maxX&&(a.maxX=_),M>a.maxY&&(a.maxY=M)}return a}function ve(e,t,n,r,i,o){var a=r*r;if(0<r&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],u=0;u<t.length;u+=3)(0===r||t[u+2]>a)&&(n.numSimplified++,s.push(t[u]),s.push(t[u+1])),n.numPoints++;if(i){for(var l=s,i=o,c=0,d=0,h=l.length,p=h-2;d<h;p=d,d+=2)c+=(l[d]-l[p])*(l[d+1]+l[p+1]);if(0<c===i)for(d=0,h=l.length;d<h/2;d+=2){var g=l[d],v=l[d+1];l[d]=l[h-2-d],l[d+1]=l[h-1-d],l[h-2-d]=g,l[h-1-d]=v}}e.push(s)}}function r(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||24<t.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r,i,o,a,s,e=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)p(n,e.features[r],t,r);else"Feature"===e.type?p(n,e,t):p(n,{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=e,i=(t=t).buffer/t.extent,a=M(o=r,1,-1-i,i,0,-1,2,t),s=M(r,1,1-i,2+i,0,-1,2,t),(a||s)&&(o=M(r,1,-i,1+i,0,-1,2,t)||[],a&&(o=ce(a,1).concat(o)),s&&(o=o.concat(ce(s,-1)))),(e=o).length&&this.splitTile(e,0,0,0),n&&(e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function fe(e,t,n){return 32*((1<<e)*n+t)+e}r.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},r.prototype.splitTile=function(e,t,n,r,i,o,a){for(var s=[e,t,n,r],u=this.options,l=u.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var c,d,h,p,g,v,f,y,m,I=1<<t,E=fe(t,n,r),_=this.tiles[E];if(_||(1<l&&console.time("creation"),_=this.tiles[E]=ge(e,t,n,r,u),this.tileCoords.push({z:t,x:n,y:r}),l&&(1<l&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,_.numFeatures,_.numPoints,_.numSimplified),console.timeEnd("creation")),this.stats[E="z"+t]=(this.stats[E]||0)+1,this.total++)),_.source=e,i){if(t===u.maxZoom||t===i)continue;var E=1<<i-t;if(n!==Math.floor(o/E)||r!==Math.floor(a/E))continue}else if(t===u.indexMaxZoom||_.numPoints<=u.indexMaxPoints)continue;_.source=null,0!==e.length&&(1<l&&console.time("clipping"),c=.5-(E=.5*u.buffer/u.extent),h=1+E,f=p=g=v=null,y=M(e,I,n-E,n+(d=.5+E),0,_.minX,_.maxX,u),m=M(e,I,n+c,n+h,0,_.minX,_.maxX,u),e=null,y&&(f=M(y,I,r-E,r+d,1,_.minY,_.maxY,u),p=M(y,I,r+c,r+h,1,_.minY,_.maxY,u),y=null),m&&(g=M(m,I,r-E,r+d,1,_.minY,_.maxY,u),v=M(m,I,r+c,r+h,1,_.minY,_.maxY,u),m=null),1<l&&console.timeEnd("clipping"),s.push(f||[],t+1,2*n,2*r),s.push(p||[],t+1,2*n,2*r+1),s.push(g||[],t+1,2*n+1,2*r),s.push(v||[],t+1,2*n+1,2*r+1))}},r.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,r=r.debug;if(e<0||24<e)return null;var o=1<<e,o=fe(e,t=(t%o+o)%o,n);if(this.tiles[o])return he(this.tiles[o],i);1<r&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var a,s=e,u=t,l=n;!a&&0<s;)s--,u=Math.floor(u/2),l=Math.floor(l/2),a=this.tiles[fe(s,u,l)];return a&&a.source?(1<r&&console.log("found parent tile z%d-%d-%d",s,u,l),1<r&&console.time("drilling down"),this.splitTile(a.source,s,u,l,e,t,n),1<r&&console.timeEnd("drilling down"),this.tiles[o]?he(this.tiles[o],i):null):null};function ye(e){var t=[],n=e&&e.features;if(n)for(var r=0,i=n.length;r<i;r+=1){var o=n[r],a=o.type,s=void 0,u=!1;switch(a){case Le:s={type:y.MULTI_POINT,coordinates:o.geometry.map(function(e){return e.slice()})};break;case Ne:case Te:s={type:y.MULTI_LINESTRING,coordinates:o.geometry.map(function(e){return e.map(function(e){return e.slice()})})},a===Te&&null==(s=function(e){for(var t,n=[],r=[],i=0,o=e.coordinates.length;i<o;i+=1){var a=e.coordinates[i],s=ke(a);null!==s&&(s===(t=t||s)&&r.length&&(n.push(r),r=[]),r.push(a))}return 0<r.length&&n.push(r),1===n.length?(e.type=y.POLYGON,e.coordinates=n[0]):1<n.length?(e.type=y.MULTI_POLYGON,e.coordinates=n):e=null,e}(s))&&(u=!0);break;default:u=!0}u||t.push({geometry:s,id:o.id,properties:o.tags,type:"Feature"})}return{type:"FeatureCollection",features:t}}function me(e,t,n,r,i){r=r,i=i,t=1<<(t=t),(o=[])[0]=((e=e)[0]/i+n)/t,o[1]=(e[1]/i+r)/t;var o,n={x:o[0],y:o[1]};return i=(e=n).x,e=e.y,i=360*(i-.5),r=Math.exp(Math.PI*(.5-e)/.25)-1,e=Math.exp(Math.PI*(.5-e)/.25)+1,[i,180*Math.asin(r/e)/Math.PI]}var y={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINESTRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection"},Ie={fillColor:"#e0e0e0",outlineColor:"#829DB4",outlineWidth:1},Ee={fill:"#333333",size:13},_e={fillColor:"#F2F285",outlineColor:"#0088BF",outlineWidth:1.2},Me=16,Se=18,be=24,s={FOOTPRINT:"FOOTPRINT",ICON:"ICON",TEXT:"TEXT",VECTOR:"VECTOR"},Le=1,Ne=2,Te=3,Oe="CW",Ae="CCW",ke=function(e){e=function(e){for(var t=0,n=e.length,r=0;r<n-1;r+=1){var i=e[r],o=e[r+1];t+=i[0]*o[1]-o[0]*i[1]}return t+=e[n-1][0]*e[0][1]-e[0][0]*e[n-1][1]}(e);return 0<e?Oe:e<0?Ae:void 0};(function(e){function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var n,r;e.exports=(n=[function(e,t,n){function c(e){return(c="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)})(e)}var o=n(1),n=n(7),E=n.get,x=(n.deepValue,n.isArray),n=function(){function I(e,t){var n=t.location,n=void 0===n?0:n,r=t.distance,r=void 0===r?100:r,i=t.threshold,i=void 0===i?.6:i,o=t.maxPatternLength,o=void 0===o?32:o,a=t.caseSensitive,a=void 0!==a&&a,s=t.tokenSeparator,s=void 0===s?/ +/g:s,u=t.findAllMatches,u=void 0!==u&&u,l=t.minMatchCharLength,l=void 0===l?1:l,c=t.id,c=void 0===c?null:c,d=t.keys,d=void 0===d?[]:d,h=t.shouldSort,h=void 0===h||h,p=t.getFn,p=void 0===p?E:p,g=t.sortFn,g=void 0===g?function(e,t){return e.score-t.score}:g,v=t.tokenize,v=void 0!==v&&v,f=t.matchAllTokens,f=void 0!==f&&f,y=t.includeMatches,y=void 0!==y&&y,m=t.includeScore,m=void 0!==m&&m,t=t.verbose,t=void 0!==t&&t;if(!(this instanceof I))throw new TypeError("Cannot call a class as a function");this.options={location:n,distance:r,threshold:i,maxPatternLength:o,isCaseSensitive:a,tokenSeparator:s,findAllMatches:u,minMatchCharLength:l,id:c,keys:d,includeMatches:y,includeScore:m,shouldSort:h,getFn:p,sortFn:g,verbose:t,tokenize:v,matchAllTokens:f},this.setCollection(e),this._processKeys(d)}for(var e=I.prototype,t=[{key:"setCollection",value:function(e){return this.list=e}},{key:"_processKeys",value:function(e){if(this._keyWeights={},this._keyNames=[],e.length&&"string"==typeof e[0])for(var t=0,n=e.length;t<n;t+=1){var r=e[t];this._keyWeights[r]=1,this._keyNames.push(r)}else{for(var i=null,o=null,a=0,s=0,u=e.length;s<u;s+=1){var l=e[s];if(!l.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var c=l.name;if(this._keyNames.push(c),!l.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');l=l.weight;if(l<0||1<l)throw new Error('"weight" property in key must bein the range of [0, 1)');o=null==o?l:Math.max(o,l),i=null==i?l:Math.min(i,l),a+=this._keyWeights[c]=l}if(1<a)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{limit:!1},e=(this._log('---------\nSearch pattern: "'.concat(e,'"')),this._prepareSearchers(e)),n=e.tokenSearchers,e=e.fullSearcher,n=this._search(n,e);return this._computeScore(n),this.options.shouldSort&&this._sort(n),t.limit&&"number"==typeof t.limit&&(n=n.slice(0,t.limit)),this._format(n)}},{key:"_prepareSearchers",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),r=0,i=n.length;r<i;r+=1)t.push(new o(n[r],this.options));return{tokenSearchers:t,fullSearcher:new o(e,this.options)}}},{key:"_search",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,n=this.list,r={},i=[];if("string"==typeof n[0])for(var o=0,a=n.length;o<a;o+=1)this._analyze({key:"",value:n[o],record:o,index:o},{resultMap:r,results:i,tokenSearchers:e,fullSearcher:t});else for(var s=0,u=n.length;s<u;s+=1)for(var l=n[s],c=0,d=this._keyNames.length;c<d;c+=1){var h=this._keyNames[c];this._analyze({key:h,value:this.options.getFn(l,h),record:l,index:s},{resultMap:r,results:i,tokenSearchers:e,fullSearcher:t})}return i}},{key:"_analyze",value:function(e,t){var N=this,T=e.key,n=e.arrayIndex,r=e.value,i=e.record,e=e.index,o=t.tokenSearchers,O=void 0===o?[]:o,A=t.fullSearcher,o=t.resultMap,k=void 0===o?{}:o,o=t.results,w=void 0===o?[]:o;!function e(t,n,r,i){if(null!=n)if("string"==typeof n){var o=!1,a=-1,s=0,u=(N._log("\nKey: ".concat(""===T?"--":T)),A.search(n));if(N._log('Full text: "'.concat(n,'", score: ').concat(u.score)),N.options.tokenize){for(var l=n.split(N.options.tokenSeparator),c=l.length,d=[],h=0,p=O.length;h<p;h+=1){var g=O[h];N._log('\nPattern: "'.concat(g.pattern,'"'));for(var v=!1,f=0;f<c;f+=1){var y=l[f],m=g.search(y),I={};m.isMatch?(I[y]=m.score,v=o=!0,d.push(m.score)):(I[y]=1,N.options.matchAllTokens||d.push(1)),N._log('Token: "'.concat(y,'", score: ').concat(I[y]))}v&&(s+=1)}for(var a=d[0],E=d.length,_=1;_<E;_+=1)a+=d[_];N._log("Token score average:",a/=E)}var M=u.score,S=(N._log("Score average:",M=-1<a?(M+a)/2:M),!N.options.tokenize||!N.options.matchAllTokens||s>=O.length);N._log("\nCheck Matches: ".concat(S)),(o||u.isMatch)&&S&&(S={key:T,arrayIndex:t,value:n,score:M},N.options.includeMatches&&(S.matchedIndices=u.matchedIndices),(t=k[i])?t.output.push(S):(k[i]={item:r,output:[S]},w.push(k[i])))}else if(x(n))for(var b=0,L=n.length;b<L;b+=1)e(b,n[b],r,i)}(void 0===n?-1:n,r,i,e)}},{key:"_computeScore",value:function(e){this._log("\n\nComputing score:\n");for(var t=this._keyWeights,n=!!Object.keys(t).length,r=0,i=e.length;r<i;r+=1){for(var o=e[r],a=o.output,s=a.length,u=1,l=0;l<s;l+=1){var c=a[l],d=c.key,h=n?t[d]:1,d=0===c.score&&t&&0<t[d]?Number.EPSILON:c.score;u*=Math.pow(d,h)}o.score=u,this._log(o)}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var n,t=[],r=(this.options.verbose&&(n=[],this._log("\n\nOutput:\n\n",JSON.stringify(e,function(e,t){if("object"===c(t)&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t},2)),n=null),[]);this.options.includeMatches&&r.push(function(e,t){var n=e.output;t.matches=[];for(var r=0,i=n.length;r<i;r+=1){var o,a=n[r];0!==a.matchedIndices.length&&(o={indices:a.matchedIndices,value:a.value},a.key&&(o.key=a.key),a.hasOwnProperty("arrayIndex")&&-1<a.arrayIndex&&(o.arrayIndex=a.arrayIndex),t.matches.push(o))}}),this.options.includeScore&&r.push(function(e,t){t.score=e.score});for(var i=0,o=e.length;i<o;i+=1){var a=e[i];if(this.options.id&&(a.item=this.options.getFn(a.item,this.options.id)[0]),r.length){for(var s={item:a.item},u=0,l=r.length;u<l;u+=1)r[u](a,s);t.push(s)}else t.push(a.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}],n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return I}();e.exports=n},function(e,t,n){var s=n(2),u=n(3),d=n(6),n=function(){function c(e,t){var n=t.location,n=void 0===n?0:n,r=t.distance,r=void 0===r?100:r,i=t.threshold,i=void 0===i?.6:i,o=t.maxPatternLength,o=void 0===o?32:o,a=t.isCaseSensitive,a=void 0!==a&&a,s=t.tokenSeparator,s=void 0===s?/ +/g:s,u=t.findAllMatches,u=void 0!==u&&u,l=t.minMatchCharLength,l=void 0===l?1:l,t=t.includeMatches,t=void 0!==t&&t;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.options={location:n,distance:r,threshold:i,maxPatternLength:o,isCaseSensitive:a,tokenSeparator:s,findAllMatches:u,includeMatches:t,minMatchCharLength:l},this.pattern=a?e:e.toLowerCase(),this.pattern.length<=o&&(this.patternAlphabet=d(this.pattern))}for(var e=c.prototype,t=[{key:"search",value:function(e){var t=this.options,n=t.isCaseSensitive,t=t.includeMatches;if(n||(e=e.toLowerCase()),this.pattern===e)return n={isMatch:!0,score:0},t&&(n.matchedIndices=[[0,e.length-1]]),n;var n=this.options,r=n.maxPatternLength,n=n.tokenSeparator;if(this.pattern.length>r)return s(e,this.pattern,n);var r=this.options,n=r.location,i=r.distance,o=r.threshold,a=r.findAllMatches,r=r.minMatchCharLength;return u(e,this.pattern,this.patternAlphabet,{location:n,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:r,includeMatches:t})}}],n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return c}();e.exports=n},function(e,t){var u=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:/ +/g,t=new RegExp(t.replace(u,"\\$&").replace(n,"|")),r=e.match(t),n=!!r,i=[];if(n)for(var o=0,a=r.length;o<a;o+=1){var s=r[o];i.push([e.indexOf(s),s.length-1])}return{score:n?.5:1,isMatch:n,matchedIndices:i}}},function(e,t,n){var A=n(4),k=n(5);e.exports=function(e,t,n,r){for(var i=r.location,o=r.distance,a=void 0===o?100:o,o=r.threshold,s=r.findAllMatches,u=void 0!==s&&s,s=r.minMatchCharLength,s=void 0===s?1:s,r=r.includeMatches,r=void 0!==r&&r,l=void 0===i?0:i,c=e.length,d=void 0===o?.6:o,h=e.indexOf(t,l),p=t.length,g=[],v=0;v<c;v+=1)g[v]=0;-1!==h&&(i=A(t,{errors:0,currentLocation:h,expectedLocation:l,distance:a}),d=Math.min(i,d),-1!==(h=e.lastIndexOf(t,l+p))&&(o=A(t,{errors:0,currentLocation:h,expectedLocation:l,distance:a}),d=Math.min(o,d)));for(var h=-1,f=[],y=1,m=p+c,I=1<<(p<=31?p-1:30),E=0;E<p;E+=1){for(var _=0,M=m;_<M;)A(t,{errors:E,currentLocation:l+M,expectedLocation:l,distance:a})<=d?_=M:m=M,M=Math.floor((m-_)/2+_);var m=M,S=Math.max(1,l-M+1),b=u?c:Math.min(l+M,c)+p,L=Array(b+2);L[b+1]=(1<<E)-1;for(var N=b;S<=N;--N){var T=N-1,O=n[e.charAt(T)];if(O&&(g[T]=1),L[N]=(L[N+1]<<1|1)&O,0!==E&&(L[N]|=(f[N+1]|f[N])<<1|1|f[N+1]),L[N]&I&&(y=A(t,{errors:E,currentLocation:T,expectedLocation:l,distance:a}))<=d){if(d=y,(h=T)<=l)break;S=Math.max(1,2*l-h)}}if(A(t,{errors:E+1,currentLocation:l,expectedLocation:l,distance:a})>d)break;f=L}i={isMatch:0<=h,score:0===y?.001:y};return r&&(i.matchedIndices=k(g,s)),i}},function(e,t){e.exports=function(e,t){var n=t.errors,r=t.currentLocation,i=t.expectedLocation,t=t.distance,t=void 0===t?100:t,n=(void 0===n?0:n)/e.length,e=Math.abs((void 0===i?0:i)-(void 0===r?0:r));return t?n+e/t:e?1:n}},function(e,t){e.exports=function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,i=0,o=e.length;i<o;i+=1){var a=e[i];a&&-1===r?r=i:a||-1===r||((a=i-1)-r+1>=t&&n.push([r,a]),r=-1)}return e[i-1]&&t<=i-r&&n.push([r,i-1]),n}},function(e,t){e.exports=function(e){for(var t={},n=e.length,r=0;r<n;r+=1)t[e.charAt(r)]=0;for(var i=0;i<n;i+=1)t[e.charAt(i)]|=1<<n-i-1;return t}},function(e,t){function c(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function d(e){if(null==e)return"";if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function h(e){return"string"==typeof e}function p(e){return"number"==typeof e}e.exports={get:function(e,t){var l=[];return function e(t,n){if(n){var r=n.indexOf("."),i=n,o=null,a=(-1!==r&&(i=n.slice(0,r),o=n.slice(r+1)),t[i]);if(null!=a)if(o||!h(a)&&!p(a))if(c(a))for(var s=0,u=a.length;s<u;s+=1)e(a[s],o);else o&&e(a,o);else l.push(d(a))}else l.push(t)}(e,t),l},isArray:c,isString:h,isNum:p,toString:d}}],r={},i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==a(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0))})(t={exports:{}});var t=t.exports,we=(n=t)&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,xe=(t.Fuse,l(function e(t){var n=t.addressList,n=void 0===n?[]:n,r=t.geometries,r=void 0===r?[]:r,i=t.entity,i=void 0===i?null:i,o=t.name,o=void 0===o?"":o,t=t.icon,t=void 0===t?"":t;u(this,e),this.addressList=n,this.geometries=r,this.icon=t,this.entity=i,this.name=o})),Pe={keys:[{name:"name",weight:.6},{name:"addressList",weight:.4}],threshold:.2},Ce=function(){function t(e){u(this,t),this.fuseSearch=null,this.levels_=null,this.searchListEntities_=[],this.searchListIcons_=[],this.searchList_=[],this.venueModel=e,this.init()}return l(t,[{key:"init",value:function(){var e=this.venueModel.getGeometries().reduce(function(e,t){return e[t.getId()]=t,e},{}),e=(this.initEntityList(this.venueModel.getOccupant()),this.initIconList(e),this.levels_=this.venueModel.getLevels().map(function(e){return{levelId:e.getId(),levelName:e.getName(),drawingId:e.getDrawing().getId(),drawingName:e.getDrawing().getName()}}),[].concat(f(this.searchListEntities_),f(this.searchListIcons_)));this.searchList_=e.sort(function(e,t){return e.name.localeCompare(t.name)}),this.fuseSearch_=new we(this.searchList_,Pe)}},{key:"initEntityList",value:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){return e.spaceIds?new xe({geometries:e.space,addressList:e.spaceIds||[],name:e.properties.name||"",entity:e}):null}).filter(function(e){return null!==e});this.searchListEntities_=e}},{key:"initIconList",value:function(){this.searchListIcons_=Object.values(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).filter(function(e){return e.isIcon()}).map(function(e){var t=e.getIcon();return new xe({geometries:[e],icon:t,name:e.properties.name||""})})}},{key:"all",value:function(){return this.searchList_}},{key:"allIconTypes",value:function(){var e=this.searchListIcons_.reduce(function(e,t){return e[t.name]=t.name,e},{});return Object.keys(e)}},{key:"find",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return""===e?this.searchList_:this.fuseSearch_.search(e)}}]),t}(),m=Object.freeze({SITE:"SITE",IMAGES:"IMAGES",THEME:"THEME"}),De="indoor.Site",Ge="indoor.Structure",je="indoor.Occupant",Re="indoor.Space",Ve="indoor.SpaceGroups",He="Address",ze="indoor.Level",Be="indoor.Entrance",Fe="OCCUPANT_NAMES",Ue="SPACE_NAME",Ye="INTERNAL_ADDRESS_SHORT",Ze="INTERNAL_ADDRESS",We="INTERNAL_ADDRESS_LONG",Je="SPACE_TYPE_NAME",Xe="SPACE_CATEGORY_NAME",Ke="Point",Qe="LineString",qe="Polygon",$e="MultiPoint",et="MultiLineString",tt="MultiPolygon",I=Object.freeze({STANDARD:"STANDARD",FLATTEN:"FLATTEN",OUTDOOR_MAIN:"OUTDOOR_MAIN",INDOOR_MAIN:"INDOOR_MAIN",NO_OUTDOORS:"NO_OUTDOORS",FLATTEN_INDOOR_MAIN:"FLATTEN_INDOOR_MAIN",FLATTEN_OUTDOOR_COPY:"FLATTEN_OUTDOOR_COPY"}),nt="9999999999999",rt="icons",it="config",ot="https://interactive.data.api.platform.here.com/interactive/v1/catalogs",n=Object.freeze({THEME:"THEME",THEME_MAP:"THEME_MAP",PRESETS:"PRESETS",SDK_STRINGS:"SDK_STRINGS",ICON_FILE:"ICON_FILE",INPUT_COLORS:"INPUT_COLORS",BASE_MAP_INFO:"BASE_MAP_INFO",CONFIG_PROFILE:"CONFIG_PROFILE",NAV_THEME:"NAV_THEME",NAV_NAME_THEME:"NAV_NAME_THEME",NAV_PROP_MAP:"NAV_PROP_MAP",NAV_STRINGS:"NAV_STRINGS",NAV_THEME_MAP:"NAV_THEME_MAP",NAV_NAME_THEME_MAP:"NAV_NAME_THEME_MAP",V4_THEME_FAMILY:"V4_THEME_FAMILY",V4_MAPTYPE_THEME:"V4_MAPTYPE_THEME",ICON:"ICON",MARKER:"MARKER",PERMISSIONS:"PERMISSIONS",NAICS_ARRAY:"NAICS_ARRAY",NAICS_MAP:"NAICS_MAP"}),n=(Object.freeze((c(t={},n.THEME,"themeUrls"),c(t,n.THEME_MAP,"themeMapUrl"),c(t,n.PRESETS,"presetsUrl"),c(t,n.SDK_STRINGS,"stringsUrl"),t)),Object.freeze((c(t={},n.THEME,"themeOverrides"),c(t,n.THEME_MAP,"themeMapOverrides"),c(t,n.PRESETS,"presetOverrides"),c(t,n.SDK_STRINGS,"stringsOverrides"),c(t,n.INPUT_COLORS,"inputColorOverrides"),t)),Object.freeze((c(t={},n.THEME,["Modern","Standard","Factory","Navteq","TheBase","Westfield_noLabels","Westfield","TDM_noLabel"]),c(t,n.SDK_STRINGS,["Standard","SDK","sdk/standard"]),c(t,n.V4_THEME_FAMILY,["modern","standard"]),c(t,n.V4_MAPTYPE_THEME,["Airport Terminal","Airport","Casino","College Building","College Campus","Convention","General","Hospital","Outdoor","Retail","School Building","School Campus","Shopping Mall","Traffic","Train Station"]),c(t,n.NAV_THEME,["Factory","MapEditor"]),c(t,n.ICON,["Multicolor","Standard","TheBase","Factory"]),t)),Object.freeze((c(t={},n.THEME,"Modern"),c(t,n.THEME_MAP,"Standard"),c(t,n.PRESETS,"Standard"),c(t,n.SDK_STRINGS,"Standard"),c(t,n.ICON_FILE,"Standard"),c(t,n.INPUT_COLORS,"Standard"),c(t,n.BASE_MAP_INFO,"Standard"),c(t,n.CONFIG_PROFILE,"factory"),c(t,n.NAV_THEME,"Factory"),c(t,n.NAV_NAME_THEME,"FactoryName"),c(t,n.NAV_PROP_MAP,"Standard"),c(t,n.NAV_STRINGS,"Standard"),c(t,n.NAV_THEME_MAP,"Standard"),c(t,n.NAV_NAME_THEME_MAP,"StandardName"),c(t,n.V4_THEME_FAMILY,"Standard"),c(t,n.V4_MAPTYPE_THEME,"Standard"),c(t,n.ICON,"Multicolor"),c(t,n.MARKER,"Standard"),t)),Object.freeze({GEO_JSON:"GEO_JSON",V5_MAP:"V5_MAP",V5_NAV:"V5_NAV",V5_INFO:"V5_INFO",KML:"KML",SVG:"SVG",PNG:"PNG"}));function E(){}function i(){i.init.call(this)}function at(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function st(e,t,n,r){var i,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener||n),i=e._events),o=i[t]):(i=e._events=new E,e._eventsCount=0),o?("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),o.warned||(r=at(e))&&0<r&&o.length>r&&(o.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=o.length,r=r,"function"==typeof console.warn?console.warn(r):console.log(r))):(o=i[t]=n,++e._eventsCount),e}function ut(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}function lt(e){var t=this._events;if(t){t=t[e];if("function"==typeof t)return 1;if(t)return t.length}return 0}function F(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}Object.freeze(c({},n.GEO_JSON,{COMMUNITY_MAP:"COMMUNITY_MAP",COMMUNITY_ENTITY:"COMMUNITY_ENTITY",PATH_LEVEL_GEOMETRY:"PATH_LEVEL_GEOMETRY",GEOJSON_LEVEL_GEOMETRY:"GEOJSON_LEVEL_GEOMETRY"})),E.prototype=Object.create(null),(i.EventEmitter=i).usingDomains=!1,i.prototype.domain=void 0,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.init=function(){this.domain=null,i.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new E,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return at(this)},i.prototype.emit=function(e){var t,n,r,i="error"===e,o=this._events;if(o)i=i&&null==o.error;else if(!i)return!1;if(a=this.domain,i){var a,i=arguments[1];if(a)return(i=i||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,i.domain=a,i.domainThrown=!1,a.emit("error",i),!1;throw i instanceof Error?i:((a=new Error('Uncaught, unspecified "error" event. ('+i+")")).context=i,a)}if(!(t=o[e]))return!1;var s,u="function"==typeof t;switch(s=arguments.length){case 1:var l=t,c=u,d=this;if(c)l.call(d);else for(var h=l.length,D=F(l,h),p=0;p<h;++p)D[p].call(d);break;case 2:var c=t,l=u,g=this,v=arguments[1];if(l)c.call(g,v);else for(var f=c.length,G=F(c,f),y=0;y<f;++y)G[y].call(g,v);break;case 3:var m=t,I=u,E=this,_=arguments[1],M=arguments[2];if(I)m.call(E,_,M);else for(var S=m.length,j=F(m,S),b=0;b<S;++b)j[b].call(E,_,M);break;case 4:var I=t,m=u,L=this,N=arguments[1],T=arguments[2],O=arguments[3];if(m)I.call(L,N,T,O);else for(var A=I.length,R=F(I,A),k=0;k<A;++k)R[k].call(L,N,T,O);break;default:for(n=new Array(s-1),r=1;r<s;r++)n[r-1]=arguments[r];var w=t,V=u,x=this,P=n;if(V)w.apply(x,P);else for(var z=w.length,B=F(w,z),C=0;C<z;++C)B[C].apply(x,P)}return!0},i.prototype.on=i.prototype.addListener=function(e,t){return st(this,e,t,!1)},i.prototype.prependListener=function(e,t){return st(this,e,t,!0)},i.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,ut(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,ut(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if((r=this._events)&&(n=r[e]))if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new E:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length;0<o--;)if(n[o]===t||n[o].listener&&n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new E,this;delete r[e]}else{for(var s=n,u=i,l=u+1,c=s.length;l<c;u+=1,l+=1)s[u]=s[l];s.pop()}r.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.removeAllListeners=function(e){var t,n=this._events;if(n){if(!n.removeListener)return 0===arguments.length?(this._events=new E,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new E:delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new E,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(;this.removeListener(e,t[t.length-1]),t[0];);}return this},i.prototype.listeners=function(e){var t=this._events,e=t&&(t=t[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[];return e},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):lt.call(e,t)},i.prototype.listenerCount=lt,i.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};function ct(e,t,n){return n===P.ObjectType.SEGMENT_START_MARKER?0===e?Vt:null:n===P.ObjectType.SEGMENT_FINISH_MARKER?1===t.length||e===t.length-1?Ht:null:"indoor"===t[e].departure.place.type?jt:Rt}var _="venues-ui-button--active",S="venues-ui-button",dt="venues-ui__drawings",ht="data-drawing",pt=function(){function o(e,t,n){var r=this,i=(u(this,o),this.clickHandler=n,this.containerDiv=document.createElement("div"),this.containerDiv.setAttribute("class",dt),document.createElement("div")),n=(i.setAttribute("class","trigger ".concat(S)),document.createElement("div"));n.setAttribute("class","arrow arrow--down"),i.appendChild(n),i.addEventListener("click",function(){i.classList.toggle(_),r.containerButtons.classList.toggle("drawings--open")}),this.containerDiv.appendChild(i),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","drawings"),this.containerDiv.appendChild(this.containerButtons),t&&this.update(t),e.appendChild(this.containerDiv)}return l(o,[{key:"drawButton",value:function(e,t,n){var r=this,i=document.createElement("div"),n=Number(n)===Number(e);i.setAttribute("class",n?"".concat(S," ").concat(_):S),i.innerHTML=t,i.setAttribute(ht,e),i.addEventListener("click",function(){r.switch(e),r.clickHandler(e)}),this.containerButtons.appendChild(i)}},{key:"switch",value:function(e){this.containerButtons.querySelectorAll(".".concat(dt," .").concat(_)).forEach(function(e){return e.setAttribute("class",S)});e=this.containerButtons.querySelector("[".concat(ht,"='").concat(e,"']"));e&&e.setAttribute("class","".concat(S," ").concat(_))}},{key:"update",value:function(n){var r=this,e=(this.containerButtons.innerHTML="",function(e){e=e.getDrawings();return new Map(e.map(function(e){var t=e.getDisplayName()||e.getName();return[e.getId(),t]}))}(n));0<e.size&&e.forEach(function(e,t){return r.drawButton(t,e,n.getRootDrawing().getId())})}}]),o}(),gt="venues-ui-button--active",b="venues-ui-button",vt="data-level",ft="venues-ui__levels",yt=function(){function o(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:4;u(this,o),this.clickHandler=r,this.levelButtonCount=i,this.currentScrollIndex=0,this.containerUI=document.createElement("div"),this.containerUI.setAttribute("class","".concat(ft)),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","levels"),this.containerUI.appendChild(this.containerButtons),t&&this.update(t,n),e.appendChild(this.containerUI)}return l(o,[{key:"clear",value:function(){this.containerButtons.innerHTML="",this.buttonScrollUp&&(this.containerUI.removeChild(this.buttonScrollUp),this.buttonScrollUp=null),this.buttonScrollDown&&(this.containerUI.removeChild(this.buttonScrollDown),this.buttonScrollDown=null)}},{key:"drawLevelButton",value:function(e,t){var n=this,r=document.createElement("div");r.innerHTML=t,r.style.fontSize="".concat(Math.max(Math.min(28.8/t.length,11.52),10),"px"),r.style.display="block",r.setAttribute("class",b),r.setAttribute(vt,e),r.addEventListener("click",function(){n.switch(e),n.clickHandler(e)}),this.containerButtons.appendChild(r)}},{key:"drawScrollButtons",value:function(){var e=this,t=(this.buttonScrollUp=document.createElement("div"),this.buttonScrollUp.setAttribute("class","".concat(b," ").concat(b,"--up")),document.createElement("div")),t=(t.setAttribute("class","arrow arrow--up"),this.buttonScrollUp.appendChild(t),this.buttonScrollUp.addEventListener("click",function(){return e.scroll(1)}),this.containerUI.insertBefore(this.buttonScrollUp,this.containerButtons),this.buttonScrollDown=document.createElement("div"),this.buttonScrollDown.setAttribute("class","".concat(b," ").concat(b,"--down")),document.createElement("div"));t.setAttribute("class","arrow arrow--down"),this.buttonScrollDown.appendChild(t),this.buttonScrollDown.addEventListener("click",function(){return e.scroll(-1)}),this.containerUI.appendChild(this.buttonScrollDown)}},{key:"scroll",value:function(){var e,t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,r=Array.from(this.containerButtons.querySelectorAll(".".concat(b))).reverse(),i=[];0<=n?(this.currentScrollIndex=Math.min(this.currentScrollIndex+n,r.length-this.levelButtonCount),e=Math.min(this.currentScrollIndex,r.length-this.levelButtonCount),t=Math.min(this.currentScrollIndex+this.levelButtonCount,r.length),i=r.slice(e,t)):n<0&&(this.currentScrollIndex=Math.max(this.currentScrollIndex+n,0),e=Math.max(0,this.currentScrollIndex),t=Math.min(r.length,this.currentScrollIndex+this.levelButtonCount),i=r.slice(e,t)),r.forEach(function(e){-1!==i.indexOf(e)?e.style.display="block":e.style.display="none"}),this.buttonScrollDown&&(0===this.currentScrollIndex?this.buttonScrollDown.setAttribute("disabled","disabled"):this.buttonScrollDown.removeAttribute("disabled")),this.buttonScrollUp&&(this.currentScrollIndex===r.length-this.levelButtonCount?this.buttonScrollUp.setAttribute("disabled","disabled"):this.buttonScrollUp.removeAttribute("disabled"))}},{key:"switch",value:function(e){this.containerButtons.querySelectorAll(".".concat(gt)).forEach(function(e){return e.setAttribute("class",b)});var t,e=this.containerButtons.querySelector(".".concat(ft," [").concat(vt,"='").concat(e,"']"));e&&(t=Array.from(this.containerButtons.querySelectorAll(".".concat(b))).reverse(),e.setAttribute("class","".concat(b," ").concat(gt)),((t=t.indexOf(e))<this.currentScrollIndex||t>=this.currentScrollIndex+4)&&this.scroll(t-this.currentScrollIndex))}},{key:"update",value:function(e,t){var n,r=this,t=function(){return new Map((0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){return[e.getZIndex(),e.getShortName()||e.getDisplayName()||e.getName()]}))}((n=e,((t=t)===I.FLATTEN?(t=n.getVenueModel().getLevelMapFlattenedByZIndex_(),Object.values(t).map(function(e){return e[0]})):n.getLevels()).sort(function(e,t){return t.getZIndex()-e.getZIndex()}))),i=e.getMainLevel().getZIndex();this.clear(),t.forEach(function(e,t){return r.drawLevelButton(t,e)}),t.size>this.levelButtonCount&&(t.size>this.levelButtonCount+1?this.currentScrollIndex=Math.min(Array.from(t).reverse().findIndex(function(e){return e[0]===i}),t.size-this.levelButtonCount):this.currentScrollIndex=0,this.drawScrollButtons(),this.scroll(0)),this.switch(i)}}]),o}(),mt=function(){function n(e,t){u(this,n),this.baseTheme=e,this.metaInformation=t,this.labelStyleMap={},this.styleMap={},this.setStyleMap()}return l(n,[{key:"setStyleMap",value:function(){this.styleMap.ENTRANCE=this.baseTheme.entranceRules.default.styleProperties,this.labelStyleMap.ENTRANCE=this.baseTheme.entranceRules.default.textLabelStyleProperties;for(var e=0,t=Object.entries(this.baseTheme.spaceRules);e<t.length;e++){var n=v(t[e],2),r=n[0],n=n[1],i=n.properties.behavioralAppearance.default.styleProperties,o=n.properties.behavioralAppearance.default.textLabelStyleProperties;if(this.styleMap[r]=i,this.labelStyleMap[r]=o,n.spaceTypes)for(var a=0,s=Object.entries(n.spaceTypes);a<s.length;a++){var u=v(s[a],2),l=u[0],u=u[1],c=u.behavioralAppearance.default.styleProperties,u=u.behavioralAppearance.default.textLabelStyleProperties;this.styleMap["".concat(r,"_").concat(l)]=c&&0!==Object.keys(c)?c:i,this.labelStyleMap["".concat(r,"_").concat(l)]=u&&0!==Object.keys(u)?u:o}}}},{key:"getBaseTheme",value:function(){return this.baseTheme}},{key:"getStyleMap",value:function(){return this.styleMap}},{key:"getGeometryStyle",value:function(e){return this.styleMap&&Object.getOwnPropertyNames(this.styleMap)?this.styleMap[e]:null}},{key:"getLabelStyle",value:function(e){return this.labelStyleMap&&Object.getOwnPropertyNames(this.labelStyleMap)?this.labelStyleMap[e]:null}}],[{key:"getGeometryDefaultStyle",value:function(){return{fill:"#e5e5e5",fillOpacity:1,stroke:"#6c7a89",strokeOpacity:1,strokeWidth:2}}},{key:"getLabelDefaultStyle",value:function(){return{stroke:"#6c7a89",zmin:15}}}]),n}(),It=function(){function e(){u(this,e),this.config=Object.seal({emitEventOnOverrideUpdate:!0}),this.imageCache={},this.releaseSettings_={displayOptions:{},mom:[]},this.theme={}}return l(e,[{key:"getMomData",value:function(){return this.releaseSettings_.mom}},{key:"getTheme",value:function(){return this.theme||{}}},{key:"getStyle",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.getTheme(),r=mt.getGeometryDefaultStyle(),i=e.properties.spaceType,e=e.properties.spaceCategory,o=e;return i&&(o="".concat(e,"_").concat(i)),{m:(e=(e=n.getGeometryStyle(o))&&!t?e:r).fill&&e.fill.toLowerCase()||"#fff",w:e.strokeWidth/10||.1,o:e.stroke&&e.stroke.toLowerCase()||"#fff",l:"Dark"}}},{key:"getLabelStyle",value:function(e){this.getTheme();var t=mt.getLabelDefaultStyle();return{fill:t.stroke,zmin:t.zmin}}}]),e}(),N=Math.PI/180,Et=180/Math.PI,T=function(){function d(){u(this,d)}return l(d,null,[{key:"toRadians",value:function(e){return e*N}},{key:"toDegrees",value:function(e){return e*Et}},{key:"getBoundingBox",value:function(e,t){var n=[];switch(e){case Ke:n=[t,t];break;case $e:case Qe:n=t;break;case et:case qe:n=t.reduce(function(e,t){return e.concat(t)},[]);break;case tt:n=t.reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){return e.concat(t)},[])}return d.getBoundingBoxVertices(n)}},{key:"getInverseTransform",value:function(e){var t=e[0]*e[3]-e[1]*e[2],t=[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,0,0];return t[4]=-(t[0]*e[4]+t[2]*e[5]),t[5]=-(t[1]*e[4]+t[3]*e[5]),t}},{key:"applyTransformToPoint",value:function(e,t){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}},{key:"transformProduct",value:function(e,t){var n=[0,0,0,0,0,0];return n[0]=t[0]*e[0]+t[2]*e[1],n[1]=t[1]*e[0]+t[3]*e[1],n[2]=t[0]*e[2]+t[2]*e[3],n[3]=t[1]*e[2]+t[3]*e[3],n[4]=t[0]*e[4]+t[2]*e[5]+t[4],n[5]=t[1]*e[4]+t[3]*e[5]+t[5],n}},{key:"convertLonLatToMerc",value:function(e){var t=e[0]*N,e=e[1]*N,e=Math.sin(e);return[.5+t/(2*Math.PI),.5-Math.log((1+e)/(1-e))/(4*Math.PI)]}},{key:"convertMercToLatLon",value:function(e){var t=2*Math.PI*(e[0]-.5),e=Math.atan(Math.sinh(2*Math.PI*(.5-e[1])));return[t/N,e/N]}},{key:"getTransformScale",value:function(e){return Math.sqrt(e[0]*e[3]-e[1]*e[2])}},{key:"getLonLatToMercTransform",value:function(e){var t=[1/360,0,0,-1/(360*Math.cos(e[1]*N)),0,0],n=d.applyTransformToPoint(t,e),e=d.convertLonLatToMerc(e);return t[4]=e[0]-n[0],t[5]=e[1]-n[1],t}},{key:"getNatToMercTransform",value:function(e){var t=[e[4],e[5]],t=d.getLonLatToMercTransform(t);return d.transformProduct(e,t)}},{key:"convertMxMy2LonLat",value:function(e,t){return e.length&&t.length?d.applyTransformToPoint(e,t):[]}},{key:"convertLonLat2MxMy",value:function(e,t){if(!e.length||!t.length)return[];e=d.getInverseTransform(e);return d.applyTransformToPoint(e,t)}},{key:"getFlattenedQuadraticBezierCurve",value:function(e,t,n){var r=[],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:10;i<1&&(i=6);for(var o=0;o<=i;o+=1){var a=o/i,s=(1-a)*(1-a),u=2*a*(1-a),a=a*a,l=s*e[0]+u*t[0]+a*n[0],s=s*e[1]+u*t[1]+a*n[1];r.push([l,s])}return r}},{key:"getFlattenedCubicBezierCurve",value:function(e,t,n,r){var i=[],o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:10;o<1&&(o=6);for(var a=0;a<=o;a+=1){var s=a/o,u=(1-s)*(1-s)*(1-s),l=3*s*(1-s)*(1-s),c=3*s*s*(1-s),s=s*s*s,d=u*e[0]+l*t[0]+c*n[0]+s*r[0],u=u*e[1]+l*t[1]+c*n[1]+s*r[1];i.push([d,u])}return i}},{key:"getRectangularCoordinatesOfLabelArea",value:function(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=v(e,6),i=r[0],o=r[1],a=r[2],s=r[3],r=r[5],u=d.getDeltaLonLatForMeterAtGivenLonLat(i,o),e=e[4];return n?(r&&(e*=-1),null!=t&&(e=(e+=t<0?2*Math.PI+t:t)<0?2*Math.PI+e:e)):e=0,d.getRectVerticesFromSignatureRectRepresentation([i,o],{xLength:a,yLength:s},e,u)}},{key:"getRotatedPoint",value:function(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[0,0],i=Math.cos(t),t=Math.sin(t),o=e[0]-r[0],e=e[1]-r[1],a=[];return[(a=n?[o*i+e*t,e*i-o*t]:[o*i-e*t,e*i+o*t])[0]+r[0],a[1]+r[1]]}},{key:"getRectVerticesFromSignatureRectRepresentation",value:function(e,t,n,r){var i=t.xLength,t=t.yLength,o=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],e=v(e,2),a=e[0],s=e[1],u=i/2,H=t/2,e=v(r,2),l=e[0],c=e[1];return[[1,1],[-1,1],[-1,-1],[1,-1]].map(function(e){return[e[0]*u,e[1]*H]}).map(function(e){return d.getRotatedPoint(e,n,o)}).map(function(e){return[e[0]*l,e[1]*c]}).map(function(e){return[e[0]+a,e[1]+s]})}},{key:"getScaleFactorForRectInSpace",value:function(e,t,n,r){e/=n,n=t/r;return n<e?n:e}},{key:"getDeltaLonLatForMeterAtGivenLonLat",value:function(e,t){return[1/6371e3*(180/Math.PI)/Math.cos(t*Math.PI/180),1/6371e3*(180/Math.PI)]}},{key:"getBoundingBoxVertices",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=[[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]];return e.reduce(function(e,t){return[[Math.min(t[0],e[0][0]),Math.min(t[1],e[0][1])],[Math.max(t[0],e[1][0]),Math.max(t[1],e[1][1])]]},t)}},{key:"isPointInBoundingBox",value:function(e,t){var n,r,i,o;if(e&&t)return e=v(e,2),n=e[0],e=e[1],t=v(t,2),i=v(t[0],2),r=i[0],i=i[1],t=v(t[1],2),o=t[0],t=t[1],n<=o&&r<=n&&e<=t&&i<=e}},{key:"isPointOnLineSegment",value:function(e,t,n){var e=v(e,2),r=e[0],e=e[1],t=v(t,2),i=t[0],t=t[1],n=v(n,2),o=n[0],n=n[1],a=(t-e)*(n-e)<=0;return i===o?i===r&&a:e-n==(n-t)/(o-i)*(r-o)&&a}},{key:"rayIntersectLineSegment",value:function(e,t,n){var e=v(e,2),r=e[0],e=e[1],t=v(t,2),i=t[0],t=t[1],n=v(n,2),o=n[0],n=n[1];if(i===o)return!1;r=(r-i)/(o-i);return 0<=r&&r<1&&e<(n-t)*r+t}},{key:"isPointInPolygon",value:function(e,t){var e=v(e,2),n=e[0],r=e[1],e=t.length;if(e<3)return!1;var i=0,o=t[e-1];return t.forEach(function(e){d.rayIntersectLineSegment([n,r],o,e)&&(i+=1),o=e}),i%2!=0}},{key:"isPointOnLineString",value:function(e,t){var e=v(e,2),n=e[0],r=e[1],i=t.length;if(!(i<2))for(var o=t[i-1],a=0;a<i;a+=1){var s=t[a];if(d.isPointOnLineSegment([n,r],o,s))return!0;o=t[a]}return!1}},{key:"getAreaOfPolygon",value:function(e){var t=e.length;if(t<3)return null;var o=0,a=e[t-1];return e.forEach(function(e){var t,n,r,i;o+=.5*(n=e,t=v(t=a,2),r=t[0],t=t[1],n=v(n,2),i=n[0],r*n[1]-t*i),a=e}),o}},{key:"getDistanceBetweenPoints",value:function(e,t){var e=v(e,2),n=e[0],e=e[1],t=v(t,2),n=n-t[0],e=e-t[1];return Math.sqrt(n*n+e*e)}}]),d}(),_t=function(){function e(){u(this,e),this.spaceRules={}}return l(e,null,[{key:"getDataEntriesOne",value:function(e,t){var n,e=[e,""];return null!==t&&Array.isArray(t)?e[1]=t.toString():null!==t&&"object"===a(t)?0<(n=Object.entries(t)).length&&(n=this.getDataEntriesOne(n[0][0],n[0][1]),e[0]="".concat(e[0],".").concat(n[0]),e[1]=n[1]):e[1]=t,e}},{key:"getDataEntriesAll",value:function(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var i=v(r[n],2),o=i[0],i=i[1],o=this.getDataEntriesOne(o,i);t.push(o)}return t}},{key:"doFindComboMatch",value:function(e,t){var r="";if(e&&e.configuration&&e.configuration.combinations)for(var i=this.getDataEntriesAll(t),t=Object.entries(e.configuration.combinations),o=0,a=0,s=t;a<s.length;a++)!function(){var n=s[a],e=Object.keys(n[1]).filter(function(t){return i.some(function(e){return t===e[0]&&n[1][t]===e[1]})});e.length===Object.keys(n[1]).length&&e.length>o&&(r=n[0],o=e.length)}();return r}},{key:"getIconFromCombinations",value:function(e,t){if(e&&e.configuration.combinations&&t&&0<Object.keys(t).length&&e.behavioralAppearance.combinations&&0<Object.keys(e.behavioralAppearance.combinations).length){t=this.doFindComboMatch(e,t);if(""===t||!e.behavioralAppearance.combinations[t].labelIcon)return"";if(e.behavioralAppearance.combinations&&e.behavioralAppearance.combinations[t]&&e.behavioralAppearance.combinations[t].labelIcon)return e.behavioralAppearance.combinations[t].labelIcon.referenceUri}return""}},{key:"findSpace",value:function(e,t){if(t.spaceTypes&&t.spaceTypes[e])return t.spaceTypes[e]}},{key:"findCategory",value:function(e){if(this.spaceRules[e])return this.spaceRules[e]}},{key:"setSpaceRules",value:function(e){this.spaceRules=e}},{key:"getSpaceIcon",value:function(e,t,n){var r,i="",t=this.findCategory(t);return t&&(e=this.findSpace(e,t))&&(r="",(r=n?this.getIconFromCombinations(e,n):r)&&""!==r?i=r:e.behavioralAppearance.default.labelIcon?i=e.behavioralAppearance.default.labelIcon.referenceUri:t.properties.behavioralAppearance.default.labelIcon&&(i=t.properties.behavioralAppearance.default.labelIcon.referenceUri)),i}}]),e}(),O=function(){function e(){u(this,e),this.themeRule={},this.svgList={},this.defaultLang="ENG"}return l(e,null,[{key:"getNumberFromAlphaNumeric",value:function(e){try{var t=e.split("").reverse().join("").replace(/[^0-9]/g,"").substr(0,6);return parseInt(t,10)}catch(e){return null}}},{key:"extractNumFromSting",value:function(t){try{var e=t.replace(/[^0-9]/g,"");return parseInt(e,10)}catch(e){return console.warn("Exception in converting string to Id"),this.getNumberFromAlphaNumeric(t)}}},{key:"getVenueId",value:function(e){var t;return"number"!=typeof e?(t=e.substr(e.length-6),parseInt(t,10)):e}},{key:"getStringFormatIdentifier",value:function(e){return"number"==typeof e||e.length<13?"indoormap-00000000-0000-4000-a000-".concat(e.toString().padStart(12,"0")):e}},{key:"setSite",value:function(e,t){var n=this.getName(e),e={id:this.getStringFormatIdentifier(t),location:e.referencePoint,properties:e.properties,geometry:e.geometry,map_version:e.properties.indoorSiteMetadata.legacyVersion.mapVersion,identifier:this.getVenueId(t),obj_type:"CommunityMap"};return e.properties.name=n,e.properties.display_name=n,e}},{key:"setEntrance",value:function(e){var t=this.themeRule.entranceRules.default.labelIcon.referenceUri,n=this.extractNumFromSting(e.id),r=this.getName(e),i=e.properties;return i.icon=!0,i.svg=this.svgList[t.toLowerCase()],i.name=r||"entrance",i.display_name=r||"entrance",i.level={id:e.properties.level.id},{id:e.id,levelId:e.properties.level.id,momType:Be,geometry:e.geometry,location:e.geometry,properties:i,identifier:n,label_area:[e.referencePoint.coordinates[0],e.referencePoint.coordinates[1],50,50,180]}}},{key:"setStructure",value:function(e){var t=this.extractNumFromSting(e.id),n=this.getName(e),r=e.properties;return r.is_root=0===e.properties.drawOrder,r.display_name=n,r.map_type=e.properties.structureType,r.name=n,{id:e.id,obj_type:"Drawing",identifier:t,properties:r}}},{key:"getNameByPriority",value:function(e,t){for(var n,r=this,i="",o=0;o<e.length;o++){var a=e[o];if(("OFFICIAL"===(n=a).nameType&&n.languageCode&&n.languageCode===r.defaultLang||"OFFICIAL"===n.nameType)&&(t&&t===a.nameType||!t)){i=a.name;break}if("ABBREVIATION"===a.nameType&&(t&&t===a.nameType||!t)){i=a.name;break}if("UNCLASSIFIED"===a.nameType&&(t&&t===a.nameType||!t)){i=a.name;break}if(!a.nameType&&a.name){i=a.name;break}}return i}},{key:"getName",value:function(e,t){return e.properties&&e.properties.names?this.getNameByPriority(e.properties.names,t):e.properties.placeProperties&&e.properties.placeProperties&&e.properties.placeProperties.names?this.getNameByPriority(e.properties.placeProperties.names,t):e.properties.locationDetails&&e.properties.locationDetails[0]&&e.properties.locationDetails[0].names?this.getNameByPriority(e.properties.locationDetails[0].names,t):""}},{key:"setLevel",value:function(e){var t=this.extractNumFromSting(e.id),n=e.properties.names,r=e.properties;return r["short name"]=this.getNameByPriority(n,n&&1!==n.length?"ABBREVIATION":""),r.name=this.getNameByPriority(n,n&&1!==n.length?"ABBREVIATION":""),{id:e.id,obj_type:"Level",identifier:t,properties:r}}},{key:"setLevelConnector",value:function(e){var t=this.extractNumFromSting(e.id);return{id:e.id,obj_type:"LevelConnector",properties:e.properties,geometry:e.geometry,identifier:t,location:e.geometry}}},{key:"setOccupant",value:function(e){var t=this.getName(e),n=this.extractNumFromSting(e.id),r=e.properties;return r.occupantName=t,r.email=e.properties.placeProperties&&e.properties.placeProperties.contacts&&e.properties.placeProperties.contacts.find(function(e){return"EMAIL"===e.contactType})&&e.properties.placeProperties.contacts.find(function(e){return"EMAIL"===e.contactType}).value,r.name=t,r.tags=e.properties.attributes&&e.properties.attributes.tags,{geometry:e.geometry,id:e.id,obj_type:"Geometry",properties:r,identifier:n,spaceIds:e.properties.spaces||[],type:"Feature",momType:je}}},{key:"getIcon",value:function(e){var t=!1,n="";return this.svgList[e]&&(t=!0,n=this.svgList[e]),{icon:t,svg:n}}},{key:"setSpace",value:function(e){var t=_t.getSpaceIcon(e.properties.spaceType,e.properties.spaceCategory,e.properties.spaceTypeProperties),n=this.getName(e),t=this.getIcon(t),r=t.icon,t=t.svg,i=this.extractNumFromSting(e.id),o=(e.properties.level.id.includes("out"),e.properties.level.id),a=e.properties,n=(a.spaceName=n,a[e.properties.spaceCategory]=e.properties.spaceType,a.spaceType=e.properties.spaceType,a.spaceCategory=e.properties.spaceCategory,a.icon=r,a.svg=t,{geometry:e.geometry,id:e.id,levelId:o,label_area:[e.referencePoint.coordinates[0],e.referencePoint.coordinates[1],50,50,180],location:e.referencePoint,obj_type:"Geometry",identifier:i,properties:a,momType:Re,type:"Feature"});return e.properties.spaceAddress&&e.properties.spaceAddress.id&&(n.addressId=e.properties.spaceAddress.id),n}},{key:"setSpaceGroups",value:function(e){var t=this.extractNumFromSting(e.id);return{id:e.id,obj_type:"SpaceGroups",properties:e.properties,geometry:e.geometry,location:e.referencePoint,identifier:t}}},{key:"setTopology",value:function(e){var t=this.extractNumFromSting(e.id);return{id:e.id,obj_type:"Topology",properties:e.properties,geometry:e.geometry,identifier:t}}},{key:"setAddress",value:function(e){var t=this.extractNumFromSting(e.id),n=this.getName(e),r=e.properties;return r.addressName=n,r.name=n,{id:e.id,properties:r,obj_type:"Address",identifier:t}}},{key:"manageSvgDimensions",value:function(e){for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var i,o,a=v(r[n],2),s=a[0],a=a[1];"string"==typeof a&&(i=-1!==a.indexOf("<g")&&a.indexOf("<g")||a.indexOf("<p"),o=a.indexOf("</s"),i&&o&&(a=a.substring(i-1,o-1),t[s]="<svg width='64' height='64' viewBox='0 0 24 32' fill='none' xmlns='http://www.w3.org/2000/svg'>".concat(a,"</svg>")))}return t}},{key:"getSiteBoundingBox",value:function(e){if(e){var e=v(T.getBoundingBox(e.geometry.type,e.geometry.coordinates),2),t=e[0],e=e[1];if(t)return"".concat(t[0],",").concat(t[1],",").concat(e[0],",").concat(e[1])}return"null, null, null, null"}}]),e}(),Mt=function(){function e(){u(this,e)}return l(e,null,[{key:"get",value:function(t){return fetch(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{method:"GET"}).then(function(e){return e.ok?e.json():Promise.reject(new Error("Call failed for ".concat(t," : ").concat(e.status," ").concat(e.statusText)))})}},{key:"getFormattedIndoorMapId",value:function(e){return"number"==typeof e?"indoormap-00000000-0000-4000-a000-".concat(e.toString().padStart(12,"0")):e.includes("indoormap")?e:"indoormap-00000000-0000-4000-a000-".concat(e.padStart(12,"0"))}},{key:"getConfigUrl",value:function(e,t,n){var r=n.apiKey,i=n.url,o=n.token,n=n.hrn,a={method:"GET",mode:"cors",cache:"default"},i="".concat(i||ot,"/").concat(n),n="";return t===m.SITE&&(n="".concat(i,"/layers/").concat(nt,"/search?p.featureType=indoor.Site&p.indoorMapId='").concat(this.getFormattedIndoorMapId(e),"'")),t===m.IMAGES&&(n="".concat(i,"/layers/").concat(rt,"/features/svg")),t===m.Theme&&(n="".concat(i,"/layers/").concat(it,"/features/indoorMapRules")),o?a.headers={Authorization:"Bearer ".concat(o)}:n=n.concat("".concat(t===m.SITE?"&":"?","apiKey=").concat(r)),this.get(n,a)}},{key:"getMomData",value:function(e,t){var n=t.apiKey,r=t.url,i=t.token,t=t.hrn,o={method:"GET",mode:"cors",cache:"default"},r="".concat(r||ot,"/").concat(t),t=e&&e.features&&e.features.find(function(e){return e.momType===De}),e=O.getSiteBoundingBox(t),r="".concat(r,"/layers/").concat(nt,"/bbox?bbox=").concat(e,"&f.momType=indoor.Level,indoor.Space,indoor.Site,indoor.Structure,indoor.Occupant,indoor.SpaceGroups,Address,indoor.Entrance");return i?o.headers={Authorization:"Bearer ".concat(i)}:r=r.concat("&apiKey=".concat(n)),{mom:this.get(r,o),site:t}}}]),e}(),A=function(){function i(){u(this,i)}return l(i,null,[{key:"isPointOnGeoJSONLineString",value:function(e,t){var n=!1;if(t&&1<t.length)for(var r,i,o=1;o<t.length;o+=1)if(r=t[o-1],i=t[o],T.isPointOnLineSegment(e,r,i)){n=!0;break}return n}},{key:"isPointOnGeoJSONMultiLineString",value:function(e,t){for(var n=!1,r=0;r<t.length;r+=1)if(i.isPointOnGeoJSONLineString(e,t[r])){n=!0;break}return n}},{key:"isPointInsideGeoJSONPolygon",value:function(e,t){var n=!1;if(n=T.isPointInPolygon(e,t[0])?!0:n)for(var r=1;r<t.length;r+=1)if(T.isPointInPolygon(e,t[r])){n=!1;break}return n}},{key:"isPointInsideGeoJSONMultiPolygon",value:function(e,t){for(var n=t.length,r=0;r<n;r+=1)if(i.isPointInsideGeoJSONPolygon(e,t[r]))return!0;return!1}},{key:"getGeometriesByLonLat",value:function(t,e){for(var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=[],i=e.filter(function(e){return T.isPointInBoundingBox(t,e.getBoundingBox())}),o=0;o<i.length;o+=1){var a=i[o];if(a.isPointInsideGeometry(t,!0)&&(r.push(a),!n))break}return r.sort(function(e,t){return t.getZIndex()-e.getZIndex()})}}]),i}(),St=function(){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0;u(this,r),this.id=e.id,this.properties=e.properties||{},this.labelArea=e.label_area||[],this.geometry=e.geometry||{},this.location=e.location||{},this.address=e.address||{},this.level=t,this.zIndex=n,this.spaceId=e.spaceId,this.state_={isHighlighted:!1,highlightedStyle:{}},this.geometryData=e}return l(r,[{key:"getId",value:function(){return this.geometryData&&this.geometryData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getInternalAddress",value:function(){return this.address?this.address.properties&&this.address.properties.name:null}},{key:"getCenter",value:function(){return this.location.coordinates||[]}},{key:"getCoordinates",value:function(){return this.geometry.coordinates||[]}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getStyle",value:function(){return this.getMetaInformation_().getStyle(this)}},{key:"getIcon",value:function(){return this.properties.svg}},{key:"getLabelArea",value:function(){return this.labelArea||[]}},{key:"getLabelStyle",value:function(){return this.getMetaInformation_().getLabelStyle(this)||null}},{key:"getLevel",value:function(){return this.level}},{key:"getType",value:function(){return this.geometry.type}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"getBoundingBox",value:function(){var e=this.getType(),t=this.getCoordinates(),n=[];switch(e){case Ke:n=[t,t];break;case $e:case Qe:n=t;break;case et:case qe:n=t.reduce(function(e,t){return e.concat(t)},[]);break;case tt:n=t.reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){return e.concat(t)},[])}return T.getBoundingBoxVertices(n)}},{key:"isIcon",value:function(){return!!this.properties.icon}},{key:"isPointInsideGeometry",value:function(e){var t,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=!1;switch(this.getType()){case Ke:t=this.getLabelArea()&&T.getRectangularCoordinatesOfLabelArea(this.getLabelArea()),r=T.isPointInPolygon(e,t);break;case $e:break;case Qe:r=n&&A.isPointOnGeoJSONLineString(e,this.getCoordinates());break;case et:r=n&&A.isPointOnGeoJSONMultiLineString(e,this.getCoordinates());break;case qe:r=A.isPointInsideGeoJSONPolygon(e,this.getCoordinates());break;case tt:r=A.isPointInsideGeoJSONMultiPolygon(e,this.getCoordinates())}return r}},{key:"highlight",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length?arguments[1]:void 0;this.state_.isHighlighted=e,this.state_.highlightedStyle=e?t:{}}},{key:"isHighlighted",value:function(){return Boolean(this.state_.isHighlighted)}},{key:"getHighlightedStyle",value:function(){return this.state_.highlightedStyle||{}}},{key:"toJSON",value:function(){return g({},this.geometry)}},{key:"getMetaInformation_",value:function(){return this.getLevel()?this.getLevel().getDrawing().getVenueModel().metaInformation_:null}}]),r}(),bt=function(){function r(e,t){var n=this;u(this,r),this.id=e&&e.id,this.properties=e&&e.properties,this.zIndexCount=0,this.geometries=e&&e.features&&Object.values(e.features).reduce(function(e,t){return e[[t.id]]=new St(t,n,t.properties.drawOrder),e},{}),this.drawing=t,this.levelData=e}return l(r,[{key:"getId",value:function(){return this.levelData&&this.levelData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getName",value:function(){return this.properties&&this.properties.name||""}},{key:"getDisplayName",value:function(){return this.properties&&this.properties.display_name||""}},{key:"getDrawing",value:function(){return this.drawing}},{key:"getShortName",value:function(){return this.properties&&this.properties["short name"]||""}},{key:"getZIndex",value:function(){return this.properties&&this.properties.zLevel}},{key:"getFeatureCollectionArray",value:function(){return this.getGeometries().map(function(e){return e.toJSON()})}},{key:"getGeometryById",value:function(e){return this.geometries[e]}},{key:"getGeometries",value:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]?this.geometries&&Object.values(this.geometries).sort(function(e,t){return t.getZIndex()-e.getZIndex()}):this.geometries&&Object.values(this.geometries).sort(function(e,t){return e.getZIndex()-t.getZIndex()})}},{key:"getGeometriesByAddress",value:function(t){return Object.values(this.geometries).filter(function(e){return e.address&&e.address.properties&&e.address.properties.name&&e.address.properties.name===t})}},{key:"isMain",value:function(){return Boolean(this.properties.isMain)}}]),r}(),Lt=function(){function o(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],i=3<arguments.length?arguments[3]:void 0;u(this,o),this.venueModel=i,this.levels=r.map(function(e){return new bt(e,t)}),this.structure=e,this.id=e&&e.id,this.properties=n}return l(o,[{key:"getId",value:function(){return this.structure&&this.structure&&this.structure.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"isRoot",value:function(){return Boolean(this.properties.is_root)}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getBoundingBox",value:function(){if(this.structure&&this.structure.geometry){var e=v(T.getBoundingBox(this.structure.geometry.type,this.structure.geometry.coordinates),2),t=e[0],e=e[1];if(t)return[e[1],t[0],t[1],e[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.structure&&this.structure.location&&this.structure.location.coordinates}},{key:"getGeometryById",value:function(t){return this.getGeometries().find(function(e){return e.getId()===t||e.getIdentifier()===t})}},{key:"getGeometries",value:function(){return this.levels.flatMap(function(e){return e.getGeometries()})}},{key:"getLevelById",value:function(t){return this.levels.find(function(e){return e.getId()===t||e.getIdentifier()===t})}},{key:"getLevelByZIndex",value:function(t){return this.levels.find(function(e){return e.getZIndex()===t})}},{key:"getLevels",value:function(){return this.levels}},{key:"getMainLevel",value:function(){return this.levels.find(function(e){return e.isMain()})}},{key:"getVenueModel",value:function(){return this.venueModel}}]),o}(),Nt=I.STANDARD,Tt=function(){function t(n){var r=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new It;u(this,t),this.metaInformation_=e,this.momStructure=n,this.id=n&&n.site&&n.site.id,this.location=n&&n.site&&n.site.location||{},this.properties=n&&n.site&&g({},n.site.properties),this.drawings=n&&n.structure&&Object.values(n.structure).map(function(e){var t=n.getStructureWiseGeometry(e.id);return new Lt(e,e.properties,Object.values(t),r)})}return l(t,[{key:"getDisplaySettings",value:function(){return(this.metaInformation_.releaseSettings_?this.metaInformation_.releaseSettings_.displayOptions:"").display||Nt}},{key:"getId",value:function(){return this.momStructure&&this.momStructure.site&&this.momStructure.site.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getName",value:function(){return this.properties.name}},{key:"getBoundingBox",value:function(){if(this.momStructure){var e=v(T.getBoundingBox(this.momStructure.site.geometry.type,this.momStructure.site.geometry.coordinates),2),t=e[0],e=e[1];if(t)return[e[1],t[0],t[1],e[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.location.coordinates}},{key:"getGeometryById",value:function(t){return this.getGeometries().find(function(e){return e.getId()===t||e.getIdentifier()===t})}},{key:"getGeometries",value:function(){return this.getLevels().sort(function(e,t){return e.getZIndex()-t.getZIndex()}).flatMap(function(e){return e.getGeometries()})}},{key:"getGeometriesByLonLat",value:function(t){var n=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],e=e.map(function(e){return n.getLevelById(e)});return 0===e.length&&(e=this.drawings.filter(function(e){e=e.getBoundingBox();return T.isPointInBoundingBox(t,e)}).flatMap(function(e){return e.getLevels()})),A.getGeometriesByLonLat(t,e.flatMap(function(e){return e.getGeometries(!0)}),r)}},{key:"getDrawingById",value:function(t){return this.drawings.find(function(e){return e.getId()===t||e.getIdentifier()===t})}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getRootDrawing",value:function(){return this.drawings.find(function(e){return e.isRoot()})}},{key:"getLevelById",value:function(t){return this.getLevels().find(function(e){return e.getId()===t||e.getIdentifier()===t})}},{key:"getLevelsByZIndex",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this.getLevels().filter(function(e){return Number(e.getZIndex())===Number(t)})}},{key:"getLevels",value:function(){return this.drawings.flatMap(function(e){return e.getLevels()})}},{key:"getMomStructure",value:function(){return this.momStructure}},{key:"getLevelMapFlattenedByZIndex_",value:function(){return this.getLevels().reduce(function(e,t){var n=t.getZIndex();return e[n]||(e[n]=[]),e[n].push(t),e},{})}},{key:"getOccupant",value:function(){var e=this.momStructure.occupant;return Object.values(e)}}]),t}(),Ot=function(){function t(e){u(this,t),this.theme=e&&e.theme,this.level=e&&e.level,this.site=e&&e.site,this.spaces=e&&e.spaces,this.address=e&&e.address,this.levelConnector=e&&e.levelConnector,this.topology=e&&e.topology,this.entrance=e&&e.entrance,this.occupant=e&&e.occupant,this.structure=e&&e.structure,this.spaceGroups=e&&e.spaceGroups,this.levelWiseGeometry={},this.levelStructureMapping=e&&e.levelStructureMapping,this.outdoorLevelMapping=e&&e.outdoorLevelMapping||{},this.labelTextPreference=e&&e.labelTextPreference||null}return l(t,[{key:"setSpaceWithLevel",value:function(){var r=this;this.spaces&&Object.values(this.spaces).forEach(function(e){var t="",n=(e.addressId&&(t=r.address&&r.address[e.addressId]&&r.address[e.addressId].properties.addressName),e.properties),t=(n.addressName=t,r.getLabelAsPerPreference(g(g({},e),{},{properties:n}))),n=e.properties,t=(n.name=t,n.display_name=t,e.properties.icon&&(n.name=e.id,n.display_name=e.id),e),n=(t.properties=n,t.address=r.address[e.addressId],(r.spaces[e.id]=e).levelId);r.outdoorLevelMapping[n]&&(n=r.outdoorLevelMapping[n]),r.levelWiseGeometry[n]||(r.levelWiseGeometry[n]={}),r.levelWiseGeometry[n][t.id]=t})}},{key:"setOccupantWithLevel",value:function(){var s=this;this.occupant&&Object.values(this.occupant).forEach(function(i){var o,a;i.spaceIds&&i.properties.occupantName&&(o=[],a=[],i.spaceIds.forEach(function(t){function n(e){var t=!1,t=(s.labelTextPreference&&s.labelTextPreference.length&&(t=-1!==s.labelTextPreference.indexOf("OCCUPANT_NAMES")),null===s.labelTextPreference||t),n=e,r=e.properties,t=(r.name=e.properties.icon||!t?e.properties.name:i.properties.occupantName,r.display_name=e.properties.icon||!t?e.properties.display_name:i.properties.occupantName,r.address=e.address,r.occupantName=i.properties.occupantName,e.levelId);s.outdoorLevelMapping[t]&&(t=s.outdoorLevelMapping[t]),s.levelWiseGeometry[t]||(s.levelWiseGeometry[t]={}),s.levelWiseGeometry[t][e.id]=n,o.push(n),a.push(e.id)}var e=t.id,e=s.spaces[e],r=null;s.spaceGroups&&Object.values(s.spaceGroups).forEach(function(e){e.properties.spaceGroups&&e.properties.spaceGroups&&e.properties.spaceGroups.forEach(function(e){e.mainSpace&&e.mainSpace.id===t.id&&(r=e.spaces.map(function(e){return e.id}))})});r&&0<r.length&&r.forEach(function(e){n(s.spaces[e])}),e&&n(e)}),s.occupant[i.id]=i,s.occupant[i.id].space=o,s.occupant[i.id].spaceIds=a)})}},{key:"setEntrance",value:function(){var n=this;this.entrance&&Object.values(this.entrance).forEach(function(e){var t=e.properties.level.id;n.levelWiseGeometry[t]||(n.levelWiseGeometry[e.properties.level.id]={}),n.outdoorLevelMapping[t]&&(t=n.outdoorLevelMapping[t]),n.levelWiseGeometry[t][e.id]=e})}},{key:"setLevelWiseGeometry",value:function(){var t=this;this.level&&Object.keys(this.level).forEach(function(e){t.levelWiseGeometry[e]={}}),this.setSpaceWithLevel(),this.setOccupantWithLevel(),this.setEntrance()}},{key:"getStructureWiseGeometry",value:function(e){for(var t={},n=0,r=Object.entries(this.levelWiseGeometry);n<r.length;n++){var i=v(r[n],2),o=i[0],i=i[1];e===this.levelStructureMapping[o]&&(t[o]=this.level[o],t[o].features=i)}return t}},{key:"getLabelAsPerPreference",value:function(e){var e=e.properties,t=e.spaceType,n=e.occupantName,r=e.spaceName,i=e.addressName,e=e.spaceCategory,o=(c(s={},Fe,n),c(s,Ue,r),c(s,Je,t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():""),c(s,Xe,e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""),c(s,Ye,i),c(s,Ze,i),c(s,We,i),s),n=this.theme.spaceRules,a="",r=e&&t&&n[e]&&n[e].spaceTypes&&n[e].spaceTypes[t].behavioralAppearance.default.labelType;if("NONE"===r){if(!this.labelTextPreference)return"";o[Je]=""}i=e&&t&&n[e]&&n[e].properties&&n[e].properties.behavioralAppearance&&n[e].properties.behavioralAppearance.default&&n[e].properties.behavioralAppearance.default.labelType;if(("NONE"===i||void 0===i)&&void 0===r){if(!this.labelTextPreference)return"";o[Je]="",o[Xe]=""}var s=e&&t&&n[e]&&n[e].properties&&n[e].properties.behavioralAppearance&&n[e].properties.behavioralAppearance.default&&n[e].properties.behavioralAppearance.default.labelTextPreference,u=s&&this.labelTextPreference?this.labelTextPreference:s;if(u)for(var l=0;l<u.length;l++)if(o[u[l]]){a=o[u[l]];break}return a}}]),t}(),At={isIconsEnabled:!0,isMetaEnabled:!0,metaOptions:{},iconOptions:{}},kt=function(){function i(e){var t=e.apiKey,n=e.baseUrl,r=e.token,e=e.hrn;u(this,i),this.hostOptions_={apiKey:t,url:n,token:r,hrn:e},this.momData=[],this.theme={},this.loadOptions={}}return l(i,[{key:"load",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.loadOptions=g(g(g({},At),n),{},{venueId:e}),this.hostOptions_.mapData=n.mapData,this.hostOptions_.themeRule=n.themeRule,this.hostOptions_.svgList=n.svgList,this.hostOptions_.labelTextPreference=n.labelTextPreferenceOverride,this.hostOptions_.hrn?Promise.resolve().then(function(){return t.loadOptions.isMetaEnabled?t.getMeta_(t.loadOptions.isIconsEnabled).catch(function(e){return console.warn(e),Promise.resolve()}):Promise.reject()}).then(function(e){return t.getVenue_(e)}).then(function(e){return e}).catch(function(e){console.debug("Captured event VENUE_ERROR_STATE",e)}):Promise.reject().catch(function(){return console.warn("Venue service version 1 is no longer supported and Hrn is mandatory parameter in Version 2"),Promise.resolve()})}},{key:"createMomStructure",value:function(){var r=this,i={site:{},structure:{},level:{},levelConnector:{},occupant:{},spaces:{},spaceGroups:{},topology:{},address:{},outdoorLevelMapping:{},entrance:{},levelStructureMapping:{}};return this.momData.forEach(function(e){var t="indoormap-00000000-0000-4000-a000-".concat(r.loadOptions.venueId.toString().padStart(12,"0")),n=e.id;e.momType!==He&&!r.hostOptions_.mapData&&e.properties.indoorMapId!=r.loadOptions.venueId&&e.properties.indoorMapId!==t||(e.momType===De?i.site=O.setSite(e,r.loadOptions.venueId):e.momType===Ge?i.structure[n]=O.setStructure(e):e.momType!==ze||e.properties.isOutdoor&&(!e.properties.isOutdoor||e.properties.parentIndoorLevel)?e.momType===ze&&e.properties.isOutdoor&&e.properties.parentIndoorLevel?i.outdoorLevelMapping[e.id]=e.properties.parentIndoorLevel.id:e.momType===Be?i.entrance[n]=O.setEntrance(e):e.momType===je?i.occupant[n]=O.setOccupant(e):e.momType===Re?i.spaces[n]=O.setSpace(e):e.momType===Ve?i.spaceGroups[n]=O.setSpaceGroups(e):e.momType===He&&(i.address[n]=O.setAddress(e)):(i.level[n]=O.setLevel(e),i.levelStructureMapping[n]=e.properties.structure.id))}),i.theme=this.theme,i.labelTextPreference=this.hostOptions_.labelTextPreference,new Ot(i)}},{key:"getVenue_",value:function(e){this.momData=e.getMomData();var t=this.createMomStructure();return t.setLevelWiseGeometry(),new Tt(t,e)}},{key:"setConfigData",value:function(e){var t=e.themeRule,n=e.svgList,e=e.defaultLang;_t.setSpaceRules(t.spaceRules),O.svgList=n,O.themeRule=t,O.defaultLang=e,this.theme=t}},{key:"getMeta_",value:function(){var a=this,s=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],u=new It,e=this.hostOptions_.mapData?{}:this.getMetaConfig_(this.loadOptions.venueId,m.SITE),t=this.hostOptions_.themeRule||this.getMetaConfig_(this.loadOptions.venueId,m.Theme),n=[];return s&&(n=this.hostOptions_.svgList||this.getMetaConfig_(this.loadOptions.venueId,m.IMAGES)),new Promise(function(o){Promise.all([e,t,n]).then(function(e){var e=v(e,3),t=e[0],n=e[1],r=e[2],i=a.hostOptions_.mapData?{mom:new Promise(function(e){return e(a.hostOptions_.mapData)}),site:a.hostOptions_.mapData.features.find(function(e){return e.momType===De})}:Mt.getMomData(t,a.hostOptions_);i.mom.then(function(e){var t=n.properties;u.imageCache=s?O.manageSvgDimensions(r.properties):[],a.setConfigData({themeRule:t,svgList:u.imageCache,defaultLang:i&&i.site&&i.site.properties.defaultLanguageCode}),u.releaseSettings_={displayOptions:{display:t.entranceRules.default.displayName||I.STANDARD},mom:e.features},u.theme=new mt(t,u),o(u)})})})}},{key:"getMetaConfig_",value:function(e,t){return Mt.getConfigUrl(e,t,this.hostOptions_)}}]),i}(),wt=["origin","destination"],xt=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(u(this,t),!e.apiKey&&!e.token)throw new Error("API key or Token is missing");this.config_=g({baseUrl:"https://meta-indoor-routing.api-gateway.ls.hereapi.com"},e)}return l(t,[{key:"calculateRoute",value:function(e){var t=e.origin,t=void 0===t?{}:t,n=e.destination,n=void 0===n?{}:n,e=B(e,wt);if(!t.coordinates||!n.coordinates)throw new Error("Waypoint coordinates are missing");function r(e){var t=e.coordinates,n=e.venueId,e=e.levelId,t=t.join(",");return n&&e?t.concat(";indoorMapId=",n,";levelId=",e):t}var i=new URL("".concat(this.config_.baseUrl,"/v1/routes")),o=new URLSearchParams({origin:r(t),destination:r(n),apiKey:this.config_.apiKey});return Object.entries(e).forEach(function(e){var e=v(e,2),t=e[0],e=e[1];o.append(t,"object"===a(e)?JSON.stringify(e):e)}),i.search=o,fetch(i,{headers:{"X-Api-Key":this.config_.apiKey}}).then(function(e){return e.json()})}}]),t}(),k={VENUE_DATA_LOADED:"VENUE_DATA_LOADED",VENUE_THEME_LOADED:"VENUE_THEME_LOADED",VENUE_ICONS_LOADED:"VENUE_ICONS_LOADED",VENUE_MOM_DATA_LOADED:"VENUE_MOM_DATA_LOADED",VENUE_ERROR_STATE:"VENUE_ERROR_STATE",VENUE_MAP_DATA_LOADED:"VENUE_MAP_DATA_LOADED",VENUE_ENTITY_DATA_LOADED:"VENUE_ENTITY_DATA_LOADED",VENUE_DATA_MODEL_LOADED:"VENUE_DATA_MODEL_LOADED",VENUE_NAV_DATA_LOADED:"VENUE_NAV_DATA_LOADED",META_DATA_LOADED:"META_DATA_LOADED",META_DATA_MODEL_LOADED:"META_DATA_MODEL_LOADED",META_DATA_MODEL_UPDATED:"META_DATA_MODEL_UPDATED"},n=(Object.freeze((c(t={},k.VENUE_DATA_LOADED,{description:"event fired when all requested files along with metadata & overrides are loaded",emitTemplate:{}}),c(t,k.VENUE_MAP_DATA_LOADED,{description:"event fired when requested levels, drawings & community files are loaded",emitTemplate:{}}),c(t,k.VENUE_ENTITY_DATA_LOADED,{description:"event fired when requested entity data is loaded",emitTemplate:{}}),c(t,k.VENUE_DATA_MODEL_LOADED,{description:"event fired when a map file is loaded",emitTemplate:{}}),c(t,k.VENUE_NAV_DATA_LOADED,{description:"event fired when requested navigation product is loaded",emitTemplate:{}}),c(t,k.META_DATA_LOADED,{description:"event fired when all requested meta files are loaded except icon & marker",emitTemplate:{}}),c(t,k.META_DATA_MODEL_LOADED,{description:"event fired when a specific model is loaded except icon & marker",emitTemplate:{}}),c(t,k.META_DATA_MODEL_UPDATED,{description:"event fired when a specific meta override is added or removed",emitTemplate:{}}),c(t,k.VENUE_ICONS_LOADED,{description:"event fired when all icons of venue are loaded",emitTemplate:{}}),t)),new i),w=(n.EVENT_NAME=k,n.on("newListener",function(e){k[e]||console.warn("subscribing for un-registered/documented event")}),function(){d(s,H.map.Feature);var t=h(s);function s(e){var n;if(u(this,s),n=t.call(this),e instanceof Tt)return n.venueModel=e,n.search_=new Ce(e),n.status_={activeDrawingId:e.getRootDrawing().getIdentifier(),activeLevelIndex:e.getRootDrawing().getMainLevel().getZIndex()},n.mapObjectStore_=n.getDefaultMapObjectsStore_(),n.drawings=e.getDrawings().map(function(e){e=new X(e);return e.setParentEventTarget(U(n)),e}),n.levels=e.getLevels().map(function(e){var t=new K(e);return t.setParentEventTarget(n.drawings.find(function(e){return e.getIdentifier()===t.getData().getDrawing().getIdentifier()})),t}),n.geometries=e.getGeometries().map(function(e){var t=new J(e);return t.setParentEventTarget(n.levels.find(function(e){return e.getIdentifier()===t.getData().getLevel().getIdentifier()})),t}),n.mutualExclusiveHighlight_=!1,n;throw new Error("It is mandatory to provide valid instance of venueModel")}return l(s,[{key:"getData",value:function(){return this.venueModel}},{key:"getBoundingBox",value:function(){return z(H.geo.Rect,f(this.venueModel.getBoundingBox()))}},{key:"getCenter",value:function(){var e=v(this.venueModel.getCenter(),2),t=e[0],e=e[1];return new H.geo.Point(e,t)}},{key:"getId",value:function(){return this.venueModel.getId()}},{key:"getIdentifier",value:function(){return this.venueModel.getIdentifier()}},{key:"getName",value:function(){return this.venueModel.getName()}},{key:"getDrawing",value:function(t){return this.drawings.find(function(e){return e.getIdentifier()===t})}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getLevel",value:function(t){return this.levels.find(function(e){return e.getIdentifier()===t})}},{key:"getLevels",value:function(){return this.levels}},{key:"getGeometry",value:function(t){return this.getGeometries().find(function(e){return e.getIdentifier()===t})}},{key:"getGeometries",value:function(){return this.geometries}},{key:"getActiveLevels",value:function(){var t=this;return this.getData().getDisplaySettings()===I.FLATTEN?this.venueModel.getLevelsByZIndex(this.status_.activeLevelIndex).map(function(e){return t.getLevel(e.getIdentifier())}):[this.venueModel.getDrawingById(this.status_.activeDrawingId).getLevelByZIndex(this.status_.activeLevelIndex)].map(function(e){return t.getLevel(e.getIdentifier())})}},{key:"getActiveDrawing",value:function(){return this.getDrawing(this.status_.activeDrawingId)}},{key:"setActiveDrawing",value:function(e){if(this.status_.activeDrawingId!==e){var t=this.venueModel.getDrawingById(e);if(!t)throw new Error("Drawing ".concat(e," was not found"));var n=this.status_.activeDrawingId;this.status_.activeDrawingId=t.id,this.setActiveLevelIndex(t.getMainLevel().getZIndex()),this.dispatchEvent(new H.util.ChangeEvent(s.EVENTS.DRAWING_CHANGE,e,n))}}},{key:"getActiveLevelIndex",value:function(){return this.status_.activeLevelIndex}},{key:"setActiveLevelIndex",value:function(e){var t;this.venueModel.getLevelsByZIndex(e)&&(t=this.status_.activeLevelIndex,this.status_.activeLevelIndex=e,this.dispatchEvent(new H.util.ChangeEvent(s.EVENTS.LEVEL_CHANGE,e,t)))}},{key:"isActive",value:function(){var e=this.getParentEventTarget();return!!e&&this===e.activeVenue}},{key:"getHighlightedGeometries",value:function(){var t=this;return this.venueModel.getGeometries().filter(function(e){return e.isHighlighted()}).map(function(e){return t.getGeometry(e.getIdentifier())})}},{key:"setHighlightedGeometries",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],n=g(g({},_e),n),i=n.fillColor,o=n.outlineColor,a=n.outlineWidth;this.mutualExclusiveHighlight_=!!r,this.mutualExclusiveHighlight_&&this.getHighlightedGeometries().forEach(function(e){e.getData().highlight(!1)}),e.forEach(function(e){e.getData().highlight(t,{m:i,o:o,w:a})}),this.dispatchEvent(s.EVENTS.GEOMETRY_HIGHLIGHT)}},{key:"getMapObjects",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.getActiveLevelIndex(),t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getActiveDrawing();return this.mapObjectStore_[e][t.getIdentifier()]}},{key:"setMapObjects",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getActiveLevelIndex(),n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.getActiveDrawing();this.mapObjectStore_[t]&&this.mapObjectStore_[t][n.getIdentifier()]&&(this.mapObjectStore_[t][n.getIdentifier()]=f(e)),this.updateMapObjectsVisibility_()}},{key:"search",value:function(){var t=this;return this.search_.find(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").flatMap(function(e){return e.geometries.map(function(e){return t.getGeometry(e.id)})})}},{key:"updateMapObjectsVisibility_",value:function(){Object.values(this.mapObjectStore_).forEach(function(e){Object.values(e).forEach(function(e){return e.forEach(function(e){return e.setVisibility(!1)})})}),this.isActive()&&this.mapObjectStore_[this.getActiveLevelIndex()][this.getActiveDrawing().getIdentifier()].forEach(function(e){return e.setVisibility(!0)})}},{key:"getDefaultMapObjectsStore_",value:function(){var r=this,i=this.getData().getDisplaySettings()===I.FLATTEN;return this.venueModel.getLevels().reduce(function(e,t){var n=t.getZIndex(),e=g({},e);return e[n]||(e[n]={}),e[n][t.getDrawing().getIdentifier()]=[],i&&(e[n][r.venueModel.getRootDrawing().getIdentifier()]=[]),e},{})}}]),s}()),x=(w.EVENTS={ACTIVE_VENUE_CHANGE:"activevenuechange",DRAWING_CHANGE:"drawingchange",LEVEL_CHANGE:"levelchange",GEOMETRY_HIGHLIGHT:"geometryhighlight"},function(){function e(){u(this,e)}return l(e,null,[{key:"getIconLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap(function(e){return e.getData().getGeometries()}).filter(function(e){return e.isIcon()&&e.getIcon()}).map(function(e){var t=v(e.getLabelArea(),2),n=t[0],t=t[1],r=e.getLevel(),i=e.getIcon(),o=e.properties.spaceType||e.properties.spaceCategory||e.getDisplayName();return{type:"Feature",properties:{id:e.getIdentifier(),geometryId:e.getIdentifier(),levelId:r.getIdentifier(),name:o,venueId:r.getDrawing().getVenueModel().getIdentifier(),url:i?"data:image/svg+xml;utf8,".concat(encodeURIComponent(i)):""},geometry:{type:y.POINT,coordinates:[n,t]}}})}}},{key:"getLabelLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap(function(e){return e.getData().getGeometries()}).filter(function(e){return e.getDisplayName()&&!e.isIcon()}).map(function(e){var t=v(e.getLabelArea(),2),n=t[0],t=t[1],r=e.getLabelStyle(),i=r.fill,r=r.zmin,o=e.getLevel();return{type:"Feature",properties:{id:e.getIdentifier(),geometryId:e.getIdentifier(),levelId:o.getIdentifier(),venueId:o.getDrawing().getVenueModel().getIdentifier(),name:e.getDisplayName(),minZoom:r||15,textFillColor:i.toLowerCase()},geometry:{type:y.POINT,coordinates:[n,t]}}})}}},{key:"getGeometryLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap(function(e){return e.getData().getGeometries()}).filter(function(e){return e.getType()!==y.POINT}).map(function(e){var t=e.getHighlightedStyle()||{},n=t.m,r=t.o,t=t.w,i=g({},e.getStyle()),o=i.m,a=i.o,i=i.w,s=Ie,u=s.fillColor,l=s.outlineColor,s=s.outlineWidth,c=e.getLevel();return{type:"Feature",properties:{id:e.getIdentifier(),fillColor:(n||o||u).toLowerCase(),geometryId:e.getIdentifier(),levelId:c.getIdentifier(),venueId:c.getDrawing().getVenueModel().getIdentifier(),outlineColor:(r||a||l).toLowerCase(),outlineWidth:Number(((t||i||s)/3).toFixed(2)),zIndex:e.getZIndex()},geometry:{type:e.getType(),coordinates:e.getCoordinates()}}})}}},{key:"getFootprintLayer",value:function(e){return{type:"FeatureCollection",features:e.flatMap(function(e){var t=e.getData().getRootDrawing().getMainLevel().getIdentifier(),n=e.getLevel(t).getData().getGeometries().filter(function(e){return e.getType()===y.POLYGON});return[{type:"Feature",properties:{isFootprint:!0,levelId:t,venueId:e.getIdentifier(),zIndex:1},geometry:{type:"MultiPolygon",coordinates:n.map(function(e){return e.getCoordinates()})}},{type:"Feature",properties:{isFootprint:!0,levelId:t,venueId:e.getIdentifier(),zIndex:2,venueName:e.getName()},geometry:{type:"Point",coordinates:e.getCenter().toGeoJSON().coordinates.slice(0,2)}}]})}}}]),e}()),Pt=function(){function e(){u(this,e)}return l(e,null,[{key:"getStyle",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],o={styles:[{layer:s.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#613F8E",lineWidth:"2px",renderOrder:1},{layer:s.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#AF91B4",renderOrder:2},{layer:s.FOOTPRINT,when:["==",["geometry-type"],"Point"],technique:"text",color:"black",size:16,text:["get","venueName"],priority:61},{layer:s.VECTOR,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:["get","fillColor"],renderOrder:["get","zIndex"]},{layer:s.VECTOR,technique:"solid-line",color:["get","outlineColor"],lineWidth:["get","outlineWidth"],renderOrder:["get","zIndex"]},{layer:s.TEXT,minZoomLevel:["get","minZoom"],technique:"text",color:["get","textFillColor"],size:Ee.size,text:["get","name"],priority:60},{layer:s.ICON,minZoomLevel:Me,when:["==",["geometry-type"],"Point"],technique:"labeled-icon",textIsOptional:!0,size:0,imageTexture:["concat","texture",["get","name"]],screenWidth:["interpolate",["linear"],["zoom"],15,3,21,70],screenHeight:["interpolate",["linear"],["zoom"],15,3,21,70],priority:61}],images:{},imageTextures:[]};return e.forEach(function(e){var t="texture"+e.properties.name;o.images[t]||(o.images[t]={url:e.properties.url,preload:!0},o.imageTextures.push({name:t,image:t}))}),t.forEach(function(e){var t,n=e.getData().getHighlightedStyle(),r=n.m,i=n.o,n=n.w;(t=o.styles).push.apply(t,[{layer:s.VECTOR,when:["==",["get","id"],e.id],technique:"fill",color:r,renderOrder:["get","zIndex"]},{layer:s.VECTOR,when:["==",["get","id"],e.id],technique:"solid-line",color:i,lineWidth:n,renderOrder:["get","zIndex"]}])}),new H.map.render.harp.Style(o)}}]),e}(),Ct=function(){function r(){u(this,r)}return l(r,null,[{key:"getIconsTextures",value:function(){var i={},o={},a=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var n=t.properties.name;return e[n]||(e[n]=[]),e[n].push(t),e},{});return Object.keys(a).forEach(function(e){var t="texture".concat(e),n="sprite".concat(e),r=a[e][0].properties.url;i[t]={url:r,sprites:c({},n,[0,0,50,50])},a[e].forEach(function(e){e=e.properties;o["icon".concat(e.name)]={filter:{name:e.name,$zoom:{min:Me}},draw:{points:{interactive:!0,priority:1,size:[[15,"50%"],[16,"55%"],[17,"60%"],[18,"65%"],[19,"75%"],[20,"80%"],[21,"100%"]],texture:t,sprite:n}}}})}),{textures:i,iconLayers:o}}},{key:"getFootprintLayer",value:function(){return{data:{source:"venues",layer:s.FOOTPRINT},draw:{polygons:{interactive:!0,color:"#AF91B4",order:2},lines:{color:"#613F8E",width:"2px",order:1},points:{color:"[0, 0, 0, 0]",size:"0px",order:3,priority:1,text:{anchor:"center",collide:!1,font:{fill:"black",size:"16px"},text_source:"function() { return feature.venueName }"}}}}}},{key:"getGeometryLayer",value:function(){var e,t,n,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i={};return r.length&&(e=(n=r[0].getData().getHighlightedStyle()).m,t=n.o,n=n.w,i={filter:{id:r.map(function(e){return e.id})},draw:{polygons:{interactive:!0,color:e},lines:{color:t,width:n}}}),{data:{source:"venues",layer:s.VECTOR},draw:{polygons:{interactive:!0,color:"function() { return feature.fillColor }",order:"function() { return feature.zIndex }"},lines:{color:"function() { return feature.outlineColor }",order:"function() { return feature.zIndex }",width:"function() { return feature.outlineWidth }"}},highlighted:i}}},{key:"getTextLayer",value:function(){return{filter:{$zoom:{min:Se}},data:{source:"venues",layer:s.TEXT},draw:{points:{filter:"function() { return $zoom > feature.minZoom }",color:"[0, 0, 0, 0]",size:"0px",offset:["0px","-10px"],priority:2,text:{font:{fill:"function() { return feature.textFillColor }",size:Ee.size},text_source:"function() { return feature.name }"}}}}}},{key:"getIconLayer",value:function(e){return g({data:{source:"venues",layer:s.ICON}},e)}},{key:"getStyle",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=r.getIconsTextures(e),n=e.textures,e=e.iconLayers,t={venue_footprints:r.getFootprintLayer(),venue_geometries:r.getGeometryLayer(t),venue_labels:r.getTextLayer(),venue_icons:r.getIconLayer(e)},e=H.gl.yaml.safeDump({sources:{venues:{max_zoom:be,type:"GeoJSONTileSource"}},layers:t,textures:n});return new H.map.render.webgl.Style(e)}}]),r}(),Dt={type:"FeatureCollection",features:[]},Gt={extent:4096,indexMaxZoom:0,maxZoom:24,tolerance:3},t=function(){d(n,H.map.provider.RemoteTileProvider);var t=h(n);function n(e){return u(this,n),(e=t.call(this,e)).venues=[],e.activeVenue=null,e.dataLayers_={},e.tileIndexes_={},e.addEventListener(w.EVENTS.ACTIVE_VENUE_CHANGE,e.activeVenueChangeHandler_,void 0,U(e)),e}return l(n,[{key:"setStyle",value:function(e){return this.setStyleInternal(e)}},{key:"getStyle",value:function(){return this.getStyleInternal()}},{key:"isFeatureVisible_",value:function(e,t){var n=e.properties;return this.activeVenue&&n.venueId===this.activeVenue.getIdentifier()?t!==s.FOOTPRINT&&this.activeVenue.getActiveLevels().some(function(e){return e.id===n.levelId}):!0===n.isFootprint&&t===s.FOOTPRINT}},{key:"requestInternal",value:function(s,u,l,e){function c(e){for(var t=0;t<e.length;t+=1)e[t]=e[t].map(function(e){return me(e,l,s,u,Gt.extent)})}var d=this,h={};return Object.keys(this.tileIndexes_).forEach(function(t){var e=d.tileIndexes_[t].getTile(l,s,u);h[t]=e?ye(e):Dt,h[t].features=h[t].features.filter(function(e){return d.isFeatureVisible_(e,t)});for(var n=0;n<h[t].features.length;n+=1){var r=h[t].features[n],i=r.geometry.type;if(i===y.POLYGON||i===y.MULTI_LINESTRING)c(r.geometry.coordinates);else if(i===y.MULTI_POLYGON)r.geometry.coordinates.map(c);else for(var o=r.geometry.coordinates,a=0;a<o.length;a+=1)o[a]=me(o[a],l,s,u,Gt.extent)}}),e(h),{cancel:function(){}}}},{key:"getActiveVenue",value:function(){return this.activeVenue}},{key:"getVenue",value:function(t){return t?this.venues.find(function(e){return e.getIdentifier()===t}):this.activeVenue}},{key:"setActiveVenue",value:function(e){var t=this.activeVenue;this.activeVenue=e,this.dispatchEvent(new H.util.ChangeEvent(w.EVENTS.ACTIVE_VENUE_CHANGE,e,t)),this.reload()}},{key:"addVenue",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!(e instanceof w))throw new Error("Invalid argument");var n=e.getIdentifier();if(this.getVenue(n))throw new Error("Please invoke provider.removeVenue to remove old instance of venue ".concat(n," before adding new"));e.setParentEventTarget(this),this.venues.push(e),t||(this.reloadData_(),this.reloadStyle_())}},{key:"addVenues",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];0<e.length&&(e.forEach(function(e){e instanceof w&&t.addVenue(e,!0)}),this.reloadData_(),this.reloadStyle_())}},{key:"removeVenue",value:function(e){var t;e instanceof w&&-1<this.venues.indexOf(e)&&(t=e.getIdentifier(),this.activeVenue&&this.activeVenue.getIdentifier()===t&&this.setActiveVenue(null),this.venues.splice(this.venues.indexOf(e),1),this.reloadData_(),this.reloadStyle_(),this.reload())}},{key:"getFeatureProxy",value:function(e,t,n){var r=e.geometryId,e=e.venueId,e=this.getVenue(e);return r?n(e.getGeometries().find(function(e){return e.id===r})):e&&n(e),!0}},{key:"addVenueEventListeners_",value:function(e){e&&(e.addEventListener(w.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),e.addEventListener(w.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),e.addEventListener(w.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"removeVenueEventListeners_",value:function(e){e&&(e.removeEventListener(w.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),e.removeEventListener(w.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),e.removeEventListener(w.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"activeVenueChangeHandler_",value:function(e){var t=e.oldValue,e=e.newValue;t&&(this.removeVenueEventListeners_(t),t.updateMapObjectsVisibility_()),e&&(this.addVenueEventListeners_(e),e.updateMapObjectsVisibility_())}},{key:"drawingChangeHandler_",value:function(){this.reload()}},{key:"levelChangeHandler_",value:function(){this.activeVenue&&(this.activeVenue.updateMapObjectsVisibility_(),this.reload())}},{key:"geometryHighlightHandler_",value:function(){this.reloadStyle_(this.activeVenue.getHighlightedGeometries())}},{key:"createDataLayers_",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(s),n=s.FOOTPRINT,r=s.ICON,i=s.TEXT,o=s.VECTOR;e.forEach(function(e){switch(e){case o:t.dataLayers_[o]=x.getGeometryLayer(t.venues);break;case n:t.dataLayers_[n]=x.getFootprintLayer(t.venues);break;case r:t.dataLayers_[r]=x.getIconLayer(t.venues);break;case i:t.dataLayers_[i]=x.getLabelLayer(t.venues);break;default:throw new Error("Unsupported Layer ".concat(e))}})}},{key:"createTileIndexes_",value:function(){var t=this;(0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(s)).forEach(function(e){t.tileIndexes_[e]=new r(t.dataLayers_[e],Gt)})}},{key:"reloadData_",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(s);this.createDataLayers_(e),this.createTileIndexes_(e)}},{key:"reloadStyle_",value:function(e){var t=this.dataLayers_[s.ICON]?this.dataLayers_[s.ICON].features:[];this.getEngineType()===H.Map.EngineType.WEBGL?this.setStyle(Ct.getStyle(t,e)):this.getEngineType()===H.Map.EngineType.HARP&&this.setStyle(Pt.getStyle(t,e))}},{key:"providesGeoJSON",value:function(){return!0}}]),n}(),jt=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),Rt=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),Vt=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImIiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PG1hc2sgaWQ9ImMiIHdpZHRoPSIzOCIgaGVpZ2h0PSI0NiIgeD0iMCIgeT0iMCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZWxsaXBzZSBjeD0iMjAiIGN5PSI0NS4xNiIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjOTc5Nzk3IiBzdHJva2Utd2lkdGg9Ii4yNSIgcng9IjMuNSIgcnk9IjMuNSIvPjx1c2UgZmlsbD0iIzAxQjZCMiIgeGxpbms6aHJlZj0iI2IiLz48cGF0aCBmaWxsPSIjMzIzMjMyIiBmaWxsLW9wYWNpdHk9Ii41IiBkPSJNMTEuODEgMzcuNjZoMTYuMzhsLTguMiA4eiIvPjx1c2Ugc3Ryb2tlPSIjNDE2QTg2IiBzdHJva2Utd2lkdGg9Ii41IiBtYXNrPSJ1cmwoI2MpIiB4bGluazpocmVmPSIjYSIvPjxlbGxpcHNlIGN4PSIxOS44MSIgY3k9IjE5LjE5IiBmaWxsPSIjRkZGIiByeD0iNC44MSIgcnk9IjQuODEiLz48L2c+PC9zdmc+"),Ht=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzMi44MyAzMy4xMDRjLjQwNy0uMzc0IDEuNDE5LTEuNDUyIDEuNDE5LTEuNDUyeiIvPjxtYXNrIGlkPSJjIiB3aWR0aD0iMzgiIGhlaWdodD0iNDYiIHg9IjAiIHk9IjAiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PGVsbGlwc2UgaWQ9ImIiIGN4PSIxOS44MDciIGN5PSIxOS4xNjgiIHJ4PSIxMi4zNjMiIHJ5PSIxMi4xOTciLz48bWFzayBpZD0iZCIgd2lkdGg9IjI1LjcyNSIgaGVpZ2h0PSIyNS4zOTQiIHg9Ii0uNSIgeT0iLS41Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNi45NDQgNi40NzFoMjUuNzI1djI1LjM5NEg2Ljk0NHoiLz48dXNlIHhsaW5rOmhyZWY9IiNiIi8+PC9tYXNrPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxlbGxpcHNlIGN4PSIyMCIgY3k9IjQ1LjE2IiBmaWxsPSIjRkZGIiBzdHJva2U9IiM5Nzk3OTciIHN0cm9rZS13aWR0aD0iLjI1IiByeD0iMy41IiByeT0iMy41Ii8+PHVzZSBmaWxsPSIjMzIzMjMyIiB4bGluazpocmVmPSIjYSIvPjxwYXRoIGZpbGw9IiM3RDdEN0QiIGQ9Ik0xMi4wMTEgMzcuODA1aDE1Ljk3OGwtNy45MTYgOHoiLz48dXNlIHN0cm9rZT0iIzdDN0M3QyIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNlKSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNjKSIgeGxpbms6aHJlZj0iI2EiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBjeD0iMTkuODA3IiBjeT0iMTkuMTY4IiByeD0iMTIuMzYzIiByeT0iMTIuMTk3Ii8+PHBhdGggZmlsbD0iIzMyMzIzMiIgZD0iTTYuODEyIDYuOTQ4aDYuNDV2Ni4zNjRoLTYuNDV6bTAgMTIuNzI3aDYuNDV2Ni4zNjRoLTYuNDV6bTYuNDUtNi4zNjNoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS0xOS4wOTFoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS02LjM2M2g2LjQ1djYuMzY0aC02LjQ1em0wIDEyLjcyN2g2LjQ1djYuMzY0aC02LjQ1eiIvPjx1c2Ugc3Ryb2tlPSIjRkZGIiBtYXNrPSJ1cmwoI2QpIiB4bGluazpocmVmPSIjYiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPjwvZz48L3N2Zz4="),P=function(){function p(e,t){u(this,p),this.indoorMapObjects_=null,this.outdoorMapObjects_=null,this.createRouteObjects_(e,t)}return l(p,[{key:"createRouteObjects_",value:function(e){for(var c=this,e=e.sections,d=void 0===e?[]:e,h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ct,t=(this.indoorMapObjects_={},this.outdoorMapObjects_=new H.map.Group,function(e){var n,t=d[e],r=t.departure.place,i=r.id,r=r.type,o=H.util.flexiblePolyline.decode(t.polyline).polyline,a=void 0,s=void 0,u=h(e,d,p.ObjectType.SEGMENT_START_MARKER),u=(u&&(a=new H.map.Marker(t.departure.place.location,{icon:u})),h(e,d,p.ObjectType.SEGMENT_FINISH_MARKER)),l=(u&&(s=new H.map.Marker(t.arrival.place.location,{icon:u})),h(e,d,p.ObjectType.SEGMENT_POLYLINE));"indoor"===r?(u=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=new Map,n=new H.geo.LineString,r=v(e[0],3)[2];return t.set(r,[n]),e.forEach(function(e){e[2]!==r&&(r=e[2],n=new H.geo.LineString,t.has(r)?t.get(r).push(n):t.set(r,[n])),n.pushLatLngAlt.apply(n,f(e))}),t}(o),n=Array.from(u.keys()).reduce(function(e,t){return e[t]||(e[t]=new H.map.Group),e},{}),l&&u.forEach(function(e,t){e.forEach(function(e){1<e.getPointCount()&&(e=new H.map.Polyline(e,{style:l}),n[t].addObject(e))})}),a&&n[t.departure.place.location.lvl].addObject(a),s&&n[t.arrival.place.location.lvl].addObject(s),c.indoorMapObjects_[i]=g(g({},c.indoorMapObjects_[i]||{}),n)):(l&&(e=new H.geo.LineString(o.flatMap(function(e){return[e[0],e[1],0]})),r=new H.map.Polyline(e,{style:l}),c.outdoorMapObjects_.addObject(r)),a&&c.outdoorMapObjects_.addObject(a),s&&c.outdoorMapObjects_.addObject(s))}),n=0;n<d.length;n++)t(n)}},{key:"getIndoorObjects",value:function(){return this.indoorMapObjects_}},{key:"getOutdoorObjects",value:function(){return this.outdoorMapObjects_}}]),p}(),zt=(P.ObjectType={SEGMENT_START_MARKER:1,SEGMENT_FINISH_MARKER:2,SEGMENT_POLYLINE:3},function(){d(a,H.service.Service);var o=h(a);function a(e){u(this,a),t=o.call(this,a,g(g({},e),{},{baseUrl:void 0}));var t,n={apiKey:e.apikey,baseUrl:e.baseUrl,token:e.token},r={apiKey:n.apiKey,token:n.token},i=(n.apiKey||(n.apiKey=t.getUrl().getQuery().apikey),e.useLegacy||!1);return t.venueService_=new kt(n,i),r.apiKey||(r.apiKey=t.getUrl().getQuery().apikey),e.routingBaseUrl&&(r.baseUrl=e.routingBaseUrl),t.routingService_=new xt(r),t}return l(a,[{key:"loadVenue",value:function(e){return console.warn("Venue service version 1 is no longer supported hence "+e+" could not be loaded"),Promise.resolve()}},{key:"calculateRoute",value:function(e){return console.warn("HERE Indoor Routing is deprecated and will be removed soon."),this.routingService_.calculateRoute(e)}}]),a}()),C=(zt.CONFIG_KEY="venues",function(){d(i,H.service.Service);var r=h(i);function i(e){u(this,i),t=r.call(this,i,g(g({},e),{},{baseUrl:void 0}));var t,n={apiKey:e.apikey,baseUrl:e.baseUrl,token:e.token,hrn:e.hrn},e=(n.apiKey||(n.apiKey=t.getUrl().getQuery().apikey),e.useLegacy||!1);return t.venueService_=new kt(n,e),t}return l(i,[{key:"loadVenue",value:function(e){return this.venueService_.load(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).then(function(e){return new w(e)})}}]),i}()),n=(C.CONFIG_KEY="indoorMaps",H.service.Platform.prototype.getVenuesService=function(e,t){var n=C;return 1!==t&&t?e.hrn||2!==t||console.warn("Hrn is mandatory parameter in Venue Service version 2"):(console.warn("Venue service version 1 is no longer supported"),n=zt),this.createService(n,e)},C.LABEL_TEXT_PREFERENCE_OVERRIDE={OCCUPANT_NAMES:"OCCUPANT_NAMES",SPACE_NAME:"SPACE_NAME",SPACE_TYPE_NAME:"SPACE_TYPE_NAME",SPACE_CATEGORY_NAME:"SPACE_CATEGORY_NAME",INTERNAL_ADDRESS:"INTERNAL_ADDRESS"},function(){d(i,H.ui.Control);var r=h(i);function i(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return u(this,i),(t=r.call(this)).provider_=null,t.levelSelectorUI_=null,t.setAlignment(n&&n.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),t.addClass("venues-ui"),e instanceof w&&t.setVenue(e),t}return l(i,[{key:"renderInternal",value:function(e,t){Y(o(i.prototype),"renderInternal",this).call(this,e,t),this.createLevelSelectorUI_(e),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(e){e instanceof w&&(this.removeEventListeners_(),this.venue=e,this.provider_=e.getParentEventTarget(),this.update_(),this.addEventListeners_())}},{key:"createLevelSelectorUI_",value:function(e){var t=this;e.innerHTML="",this.levelSelectorUI_=null;this.levelSelectorUI_=new yt(e,null,null,function(e){return t.venue.setActiveLevelIndex(e)})}},{key:"update_",value:function(){var e,t;this.levelSelectorUI_&&(e=this.venue.getActiveDrawing().getData(),t=this.venue.getData().getDisplaySettings(),this.levelSelectorUI_.update(e,t),this.levelChangeHandler_())}},{key:"addEventListeners_",value:function(){this.venue&&(this.venue.addEventListener(w.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.addEventListener(w.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.addEventListener(w.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&(this.venue.removeEventListener(w.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.removeEventListener(w.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.removeEventListener(w.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"levelChangeHandler_",value:function(){this.levelSelectorUI_.switch(this.venue.getActiveLevelIndex())}},{key:"drawingChangeHandler_",value:function(){this.update_()}},{key:"activeVenueChangeHandler_",value:function(e){this.setVenue(e.newValue)}}]),i}()),Bt=function(){d(i,H.ui.Control);var r=h(i);function i(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return u(this,i),(t=r.call(this)).provider_=null,t.drawingSelectorUI_=null,t.addClass("venues-ui"),t.setAlignment(n&&n.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),e instanceof w&&t.setVenue(e),t}return l(i,[{key:"renderInternal",value:function(e,t){Y(o(i.prototype),"renderInternal",this).call(this,e,t),this.createDrawingSelectorUI_(e),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(e){e instanceof w&&(this.removeEventListeners_(),this.venue=e,this.provider_=e.getParentEventTarget(),this.drawingSelectorUI_&&this.drawingSelectorUI_.update(e.getData()),this.addEventListeners_())}},{key:"createDrawingSelectorUI_",value:function(e){var t=this;e.innerHTML="",this.drawingSelectorUI_=null,this.drawingSelectorUI_=new pt(e,null,function(e){return t.venue.setActiveDrawing(e)})}},{key:"addEventListeners_",value:function(){this.venue&&this.venue.addEventListener(w.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.addEventListener(w.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&this.venue.removeEventListener(w.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.removeEventListener(w.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"drawingChangeHandler_",value:function(){this.drawingSelectorUI_.switch(this.venue.getActiveDrawing().id)}},{key:"activeVenueChangeHandler_",value:function(e){this.setVenue(e.newValue)}}]),i}(),Bt=Object.freeze({__proto__:null,DrawingControl:Bt,LevelControl:n});return D(".venues-ui * {\n  font-family: \"Fira Sans\", \"Helvetica Neue\", Helvetica, sans-serif;\n  color: #0F1621;\n}\n.venues-ui .arrow {\n  display: block;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.venues-ui .arrow--up {\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-426.000000, -584.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls-Copy' transform='translate(417.753906, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(15.000000, 16.499023) rotate(-180.000000) translate(-15.000000, -16.499023) translate(9.000000, 12.749023)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n.venues-ui .arrow--down {\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-347.000000, -704.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls' transform='translate(338.251953, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(9.000000, 132.746094)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n.venues-ui .venues-ui-button {\n  display: block;\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  font-size: 16px;\n  font-weight: 600;\n  background-color: #fff;\n  border: none;\n  border-bottom: 1px solid #9FA2A6;\n  cursor: pointer;\n  overflow: hidden;\n  color: #6e737a;\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.venues-ui .venues-ui-button:hover, .venues-ui .venues-ui-button--active {\n  background-color: #f0f0f0;\n  color: #0F1621;\n}\n@keyframes fade {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n.venues-ui__drawings .drawings {\n  position: absolute;\n  top: 0;\n  right: 45px;\n  display: none;\n  opacity: 0;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__drawings .drawings--open {\n  display: block;\n  opacity: 1;\n  animation: fade 1s;\n}\n.venues-ui__drawings .drawings .venues-ui-button {\n  width: auto;\n  padding: 0 10px;\n}\n.venues-ui__drawings .drawings .venues-ui-button:first-of-type {\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n.venues-ui__drawings .drawings .venues-ui-button:last-of-type {\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n.venues-ui__drawings .trigger {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__drawings .trigger .arrow {\n  transform: rotate(0);\n  transition: 0.4s;\n}\n.venues-ui__drawings .trigger.venues-ui-button--active .arrow {\n  transform: rotate(90deg);\n  transition: 0.4s;\n}\n.venues-ui__levels {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__levels .levels {\n  overflow: hidden;\n}\n.venues-ui__levels .venues-ui-button--up + .levels .venues-ui-button {\n  border-radius: 0;\n}\n.venues-ui__levels .venues-ui-button:first-of-type {\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n.venues-ui__levels .venues-ui-button:last-of-type {\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n.venues-ui__levels .venues-ui-button[disabled=disabled] .arrow {\n  opacity: 0.5;\n}\n.venues-ui__directory {\n  position: absolute;\n  top: 10px;\n  right: 60px;\n  bottom: calc(100% - 45px);\n  width: 350px;\n  overflow: hidden;\n  background: white;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__directory.active {\n  bottom: 10px;\n}\n.venues-ui__directory .directory__list {\n  top: 80px;\n  bottom: 20px;\n  position: absolute;\n  overflow-y: scroll;\n  right: 10px;\n  left: 10px;\n  font-size: 12px;\n}\n.venues-ui__directory .directory__list svg {\n  width: 25px;\n  height: 25px;\n}\n.venues-ui__directory .directory__heading {\n  margin: 8px;\n  font-size: 15px;\n  font-weight: normal;\n  cursor: pointer;\n}\n.venues-ui__directory .directory__input {\n  margin: 10px;\n}\n.venues-ui__directory .directory__input input {\n  width: 100%;\n  padding: 5px 0;\n}\n.venues-ui__directory .directory__trigger {\n  position: absolute;\n  right: 10px;\n  top: 15px;\n  width: 10px;\n  height: 10px;\n}\n.venues-ui__directory .directory__trigger .arrow {\n  transform: rotate(0);\n  transition: 0.4s;\n}\n.venues-ui__directory .directory__trigger--active .arrow {\n  transform: rotate(-180deg);\n  transition: 0.4s;\n}"),e.Drawing=X,e.Geometry=J,e.Level=K,e.Provider=t,e.Route=P,e.Service=zt,e.Service2=C,e.Venue=w,e.ui=Bt,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
