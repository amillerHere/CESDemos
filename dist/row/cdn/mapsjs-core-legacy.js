
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.777.7777/HERE_NOTICE
 */

H.util.eval("function Uv(a,b){if(!a)throw new D(Uv,0,a);Uv.l.constructor.call(this,a);this.b={};this.c=!(!b||!b.ic);this.f=Vv++}u(Uv,wm);var Vv=0;\nUv.prototype.T=function(a,b,c,d,e,f){var g=zd(d),h=this.$a,k=g+(c.exp-h.pixelProjection.exp),l=h.min,m=h.max;d=h.tileSize;var n=h.ia().f,q=this.kb,r=q.Nc();var v=q.qb().w;var w=c.w,z=c.x,J=c.y,I={};if(g<l||g>m)return uk.DONE;e=h.requestTiles(a,k,e,f,this.f);a=e.total;e=e.tiles;f=e.length;this.g=c;this.j=b;this.a=k;r!==n&&q.ac(n);c=d=d*w/(Fd(2,k)*d);this.c||(d%1&&(d=Ad(d),w=c/d,z/=w,J/=w,w=Fd(2,k)*d),z=Ad(z),J=Ad(J));this.i=c;k=-d;g=v+d;for(h=0;h<f;h++){v=e[h];if((l=v.data)&&l.tagName){c=b.x-(z-v.x*\nd);n=b.y-(J-v.y*d);q.Hc(l,c,n,d,d);for(r=c;(r-=w)>k;)q.Hc(l,r,n,d,d);for(r=c;(r+=w)<g;)q.Hc(l,r,n,d,d)}I[this.a+\"_\"+v.x+\"_\"+v.y]=v}this.b=I;return f===a?uk.DONE:uk.PENDING};Uv.prototype.Ba=function(a,b,c){var d=this.i,e=d/this.$a.tileSize,f=this.g,g=this.j,h;if(vc(this.a)&&f){a=f.x+(a-g.x);b=f.y+(b-g.y);var k=Ad(f.w/d);var l=f=Ad(a/d);g=Ad(b/d);Cd(l)>=k&&(l%=k);0>l&&(l=k+l);(k=this.b[this.a+\"_\"+l+\"_\"+g])&&k.Ba&&(h=k.Ba((a-d*f)/e,(b-d*g)/e,c))}return h||jf};Uv.prototype.Nd=function(){return\"2d\"};function Wv(a,b){b=b||{};C(a,rl,Wv,0);Wv.l.constructor.call(this,a);this.ic=!!b.ic;this.c=b.ab||0;this.a=[];this.b={}}u(Wv,wm);\nWv.prototype.T=function(a,b,c,d,e,f){var g,h=this.$a,k;d-=this.c;this.a.length=0;var l=this.b;this.b=g={};if(d>=h.min&&d<=h.max){var m=h.od(a,d,e,f);var n=m.overlays;if(a=n.length)for(n.sort(qh),d=this.kb,e=this.ic,f=0;f<a;f++){h=n[f];var q=h.F();var r=c.cb(q.Fb());var v=c.cb(q.Bb());q=c.w;r.x>=v.x&&(r.x-=q);q=-((r.x+v.x)/q>>1)*q;r.x+=q;r.add(b);v.x+=q;v.add(b);e||(r.round(),v.round());(q=l[k=h.Za()])?delete l[k]:q={Mn:h};g[k]=q;var w=r.x;r=r.y;var z=v.x;v=v.y;var J=z-w;var I=v-r;d.ac(h.Nc());d.Hc(h.Jc(),\nw,r,J,I);q.Hg?q.Hg.set(w,r,z,v):q.Hg=new wk(w,r,z,v);this.a.push(q)}}return!m||m.requested&&m.requested===m.total||!m.requested&&n.length===m.total?uk.DONE:uk.PENDING};Wv.prototype.Ba=function(a,b,c){for(var d=this.a,e=d.length,f,g,h;e--;)if(f=d[e],g=f.Hg,g.kf(a,b))if(f=f.Mn,h)h.push(f);else if(h=[f],c)break;return h||jf};Wv.prototype.Nd=function(){return\"2d\"};Wv.prototype.o=function(){delete this.a;Wv.l.o.call(this)};Wv.prototype.disposeInternal=Wv.prototype.o;var Xv={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:0},incline:{min:0,max:0},heading:{min:180,max:180}},interaction:{ZOOM:Hl.ZOOM,COORD:Hl.COORD},capture:!0};t(\"H.map.render.p2d.capabilities\",Xv);function Yv(a,b){this.a=[];Yv.l.constructor.apply(this,arguments)}u(Yv,Am);p=Yv.prototype;p.cj=function(){return this.$a.wc.apply(this.$a,arguments)};p.T=function(a,b,c,d,e,f,g){this.a=[];return Yv.l.T.apply(this,arguments)};p.Vj=1;p.Ak=function(a,b,c,d,e,f){var g=this.Vj=d.Ta();e*=g;f*=g;var h=c.qb();b=h.w*g;h=h.h*g;var k=c.ed();this.ic?(e-=k.x*g,f-=k.y*g):(e=zd(e-k.x*g),f=zd(f-k.y*g));d.Hc(c.Jc(),e,f,b,h);a.detail?a.detail.set(e,f,e+b,f+h):a.detail=new wk(e,f,e+b,f+h);this.a.push(a)};\np.Ba=function(a,b,c){for(var d=this.a,e=d.length,f,g,h,k=jf,l=this.Vj;e--&&!(f=d[e],g=f.detail,g.kf(a,b)&&(f=f.dk,(!(h=f.pb().c)||h.Cf((a-g.left)/l,(b-g.top)/l,0))&&0>k.indexOf(f)&&(k===jf&&(k=[]),k.push(f),c))););return k};p.Nd=function(){return\"2d\"};p.o=function(){this.a=[];Yv.l.o.call(this)};Yv.prototype.disposeInternal=Yv.prototype.o;function Z(a,b,c,d){Z.l.constructor.call(this,a,b,c,d);this.I=new G(0,0);if(c=d.renderBaseBackground)this.Fn=c.lower,this.En=c.higher;this.rn=!!d.enableSubpixelRendering;this.Yc=Zv;this.pf=0;this.Ad=this.se=!1;this.g=new im;this.a=d=new qm;this.$c=A(this.$c,this);d.addEventListener(d.A.ng,this.$c);this.Aa=A(this.Aa,this);d=a.element;this.oa=a=d.ownerDocument.createElement(\"div\");a.style.position=\"absolute\";a.style.width=a.style.height=\"100%\";a.style.zIndex=0;d.insertBefore(a,d.firstChild);this.Ej=\nnew Nm(this.oa,this.ma);this.s=[];$v(this);this.uh=A(Z.prototype.uh,this);this.Y=aw;this.Yf();this.zoom=bw(this,this.v.ib()+this.ab);this.wb();cw(this,b.eb().position,this.zoom);this.Va();this.ca()}u(Z,Dl);t(\"H.map.render.p2d.RenderEngine\",Z);Z.prototype.type=Nl.P2D;var aw=2;Z.prototype.getState=function(){return this.Y};Z.prototype.getState=Z.prototype.getState;function dw(a,b,c){b=c-b;return Cd(b)<a.b.w/2?b:b-a.b.w*c/Cd(c)}\nZ.prototype.yg=function(a){var b=this,c=a.b,d=a.newValue,e=a.modifiers;a=d.position;var f=d.bounds,g,h=this.zoom,k=this.m,l=0;e&cj.POSITION&&(g=b.b.cb(a));if(e&cj.BOUNDS)d=ew(this,f.F(),e&cj.ZOOM?d.zoom:B,e&cj.POSITION?a:B),this.v.Nb(d,c);else{e&cj.POSITION||(g=b.b.cb(d.position));var m=g.x;var n=g.y;fw(this);this.I.set(0,0);d=gw(this,d);var q=d.zoom;var r=d.position;if(c){var v=q-h;var w={x:k.x,y:k.y};c=this.b.Vd(w).x;var z=this.b.projection.Ic(a);if(z.x!==this.m.x||z.y!==this.m.y||q!==this.zoom)m=\ndw(this,c,m),hw(this,function(J){var I=J-l;if(q!==h){g=b.b.Vd(z);var Y=b.b.Vd(w);m=dw(b,Y.x,g.x);n=g.y-Y.y}l=J;iw(b,m*I,n*I);h+=v*I;jw(b,h);b.Va();b.da()},this.ya,function(){cw(b,r,q);jw(b,q);b.Va(r);b.da()},this.Xa)}else kw(this),cw(this,r,q),jw(this,q),this.Va(r);this.da()}};Z.prototype.ya=300;Z.prototype.ag=function(a){var b=Ec(a);if(!b||b&&0>a)throw new D(this.ag,1,\"positive number required\");this.ya=a};Z.prototype.setAnimationDuration=Z.prototype.ag;Z.prototype.Mg=function(){return this.ya};\nZ.prototype.getAnimationDuration=Z.prototype.Mg;Z.prototype.Xa=Zl;Z.prototype.bg=function(a){if(!Da(a))throw new D(this.bg,1,\"function required\");this.Xa=a};Z.prototype.setAnimationEase=Z.prototype.bg;Z.prototype.Ng=function(){return this.Xa};Z.prototype.getAnimationEase=Z.prototype.Ng;Z.prototype.Yf=function(){this.Xa=Zl;this.ya=300};Z.prototype.resetAnimationDefaults=Z.prototype.Yf;\nZ.prototype.Ih=function(a,b,c){var d;this.Rj=Jk();(d=this.N.fa.splice(a,1)[0])&&d.C&&d.C();(d=this.u.fa.splice(a,1)[0])&&d.C&&d.C();(d=this.ra.fa.splice(a,1)[0])&&d.C&&d.C();(d=this.X.fa.splice(a,1)[0])&&d.C&&d.C();this.Pb=this.c.Ha();0===a&&(Il(this,b,!1),this.wb());this.s=Om(this.Ej,lw(this),mw(this));this.Yd();c||this.da()};function $v(a){var b=a.c.Ha(),c=0,d=b.length;[a.N={},a.u={},a.ra={},a.X={}].forEach(function(e){e.Gc=[];e.fa=[]});for(a.Pb=a.c.Ha();c<d;c++)a.Ge(c,b[c]);a.wb()}\nZ.prototype.Jh=function(){this.wb();this.da()};Z.prototype.eh=function(a,b,c){var d,e,f,g;if(b){var h={ic:this.rn,ab:this.ab};b.T?C(b,ym)?e=new xm(b):C(b,Km)&&(g=new xm(b)):(b.requestOverlays&&(d=new Wv(b,h)),b.requestTiles&&(e=new Uv(b,h)),b.requestMarkers&&(f=new Yv(b,h)),b.requestDomMarkers&&(g=new Dm(b,h)))}c=c||0;this.N.fa.splice(a,c,d);this.u.fa.splice(a,c,e);this.ra.fa.splice(a,c,f);this.X.fa.splice(a,c,g);this.Pb=this.c.Ha();this.s=Om(this.Ej,lw(this),mw(this))};\nfunction mw(a){var b=[];b=b.concat(a.u.fa);b=b.concat(a.N.fa);b=b.concat(a.ra.fa);b=b.concat(a.X.fa);return b=b.filter(vc)}function gw(a,b){var c=Jl(a,Jl(a,b.zoom)+a.ab);a=Kl(a,b);a.zoom=c;return a}function cw(a,b,c){var d=a.b;d.Ja(c);a.m=d.projection.Ic(b);d.x=d.w*a.m.x;d.y=d.h*a.m.y}Z.prototype.Pa=function(a,b){var c=this.f.center,d=this.ma;return this.b.Ka((a-c.x)*d,(b-c.y)*d)};Z.prototype.screenToGeo=Z.prototype.Pa;Z.prototype.$f=function(a,b){a=this.Pa(a,b);b=this.v.eb();b.position=a;return b};\nZ.prototype.Aa=function(a){var b=this.ma,c=this.f.center,d=c.x*b;c=c.y*b;a=this.b.cb(a);var e=this.b.w;return new G(zd((a.x-zd(a.x/e)*e+d)/b),zd((a.y+c)/b))};Z.prototype.geoToScreen=Z.prototype.Aa;Z.prototype.F=function(a,b){var c=this.ua[a||4];a=this.b;var d=c.left-b,e=a.Ka(d,c.top-b),f=c.right+b;b=a.Ka(f,c.bottom+b);f-d>=a.w&&(e.lng=-(b.lng=180));return tg(e,b)};\nZ.prototype.Ba=function(a,b,c,d){var e=[],f=this.ma,g;a*=f;b*=f;f=[this.N,this.u,this.ra,this.X];for(g=f.length;g--&&(!c||!e.length);){for(var h=e,k=f[g].fa,l=a,m=b,n=c,q=k.length;q--&&!((e=k[q])&&e.Ba&&(h=h.concat(e.Ba(l,m,n)),h.length&&n)););e=h}d(e)};Z.prototype.getObjectsAt=Z.prototype.Ba;Z.prototype.Ec=y;function lw(a){a=a.ua[2];return{w:a.right-a.left,h:a.bottom-a.top}}\nZ.prototype.ca=function(){var a=this.s.length,b;Z.l.ca.call(this);var c=lw(this);this.I.set(0,0);var d=c.w;for(b=c.h;a--;){c=this.s[a];var e=c.qb();e.w===d&&e.h===b||c.Ue(d,b)}this.Ec=new Ui(d,b);this.da()};Z.prototype.getCapabilities=function(){return Xv};Z.prototype.getCapabilities=Z.prototype.getCapabilities;function nw(a){a.i&&a.i.qa()||Jk()-a.Rj<a.Yc&&!a.wd?a.Nn=Hk(a.uh):(a.wd&&(a.Yd(),ow(a)),a.Y=aw)}p=Z.prototype;\np.Yd=function(){this.N.Gc.length=0;this.u.Gc.length=0;this.ra.Gc.length=0;this.X.Gc.length=0};\np.uh=function(){var a;this.B&&this.B.before();var b=this.u.fa;var c=this.f.center.clone().scale(this.ma).round();var d=this.F(1,0);var e=this.F(1,pw);var f=this.zoom;var g=f-this.ab;var h=this.b;var k=this.Fn;var l=this.En;var m=b[0];b=this.I;var n=this.s.length;var q=this.Pb;for(a=q.length;n--;){var r=this.s[n];C(r,vm)&&r.clear()}if(m){if(k)for(;k;)n=f-k,m.T(d,c,h,n,!0,b),--k;if(l&&this.Ad)for(r=1;r<=l&&(n=f+r,h.Ja(n),k=this.F(2,0),h.Ja(f),!m.T(k,c,h,n,!0,b));r++);}for(this.Yc=Zv;a--;)h=q[a],C(h,\noj)&&h.ia()&&h.ia().Le(e,g);d=this.Uj(d,c,f,!1,b,qw,this.u,this.N);c=this.Uj(e,c,g,!1,b,rw,this.ra,this.X);this.wd=d&&c;this.i&&this.i.qa()&&this.og();this.S||(this.S=this.v.eb());this.S.bounds=this.F(4,0);this.v.Va(this.S);this.S=null;this.Ec&&(this.f.Va(this.Ec),this.Ec=y);f<this.pf?this.Ad=!0:this.se&&(this.Ad=!1);this.pf=f;this.se=d;this.B&&this.B.after();nw(this)};\np.Uj=function(a,b,c,d,e,f,g){var h=Array.prototype.slice.call(arguments,6),k=h.length,l=h[0].fa.length,m=k*l,n=!!m,q;for(q=0;q<m;q++){if(f===qw){var r=q%k;var v=Math.floor(q/k)}else r=Math.floor(q/l),v=q%l;var w=h[r].fa[v];r=h[r].Gc;w&&(w=w.T(a,b,this.b,c,d,e,this.Aa),w===uk.ACTIVE&&(this.Yc=Infinity),w!==uk.DONE||r[v]||(ow(this,this.Pb[v]),r[v]=!0),r[v]||(n=!1))}return n};function ow(a,b){a.dispatchEvent({type:a.A.Gi,target:b||a})}\np.o=function(){var a=this.c.Ha()[0],b=this.f;Ik(this.Nn);kw(this,!0);a&&Il(this,a,!1);mw(this).forEach(function(c){c.C()});b.element&&b.element.removeChild(this.oa);this.oa=null;this.Y=3;Z.l.o.call(this)};p.da=function(){this.Rj=Jk();this.Y===aw&&(this.wd=!1,this.Y=1,nw(this))};function sw(a,b,c){iw(a,b*a.ma,c*a.ma);a.I.set(0,0);a.Va();a.da()}function iw(a,b,c){var d=a.b;a=a.m;d.x=Yd(d.x+b,d.w);d.y=yd(0,xd(d.w,d.y+c));a.x=d.x/d.w;a.y=d.y/d.h}\np.td=function(a,b,c){a=Jl(this,Jl(this,a)+this.ab);jw(this,a,b,c)};Z.prototype.zoomAt=Z.prototype.td;function jw(a,b,c,d){var e=a.ma,f=a.f.center;c===+c&&d===+d?(c=(c-f.x)*e,d=(d-f.y)*e,a.I.set(c,d),iw(a,c,d),a.b.Ja(b),iw(a,-c,-d)):(a.I.set(0,0),a.b.Ja(b));a.zoom=b;a.Va();a.da()}\nfunction ew(a,b,c,d){var e=a.getCapabilities().lookAt.zoom.max,f=b.Ya(),g=d||f;if(b.Ef()||c&&d)c=c===B?e:c;else{var h=new lj(a.b.projection);h.Ja(e);var k=h.cb(b.Fb()).round();var l=h.cb(b.Bb()).round();e=h.w;b.tb()&&(k.x-=e);d?(f=h.cb(g),b=2*yd(f.x-k.x,l.x-f.x),k=2*yd(f.y-k.y,l.y-f.y)):(b=l.x-k.x,k=l.y-k.y,g=f);c===B&&(f=a.ua[4],c=f.right-f.left,f=f.bottom-f.top,c=-8+xd(Dd(c/b*e)/Nd,Dd(f/k*e)/Nd)-a.ab,c=Jl(a,c))}return{zoom:Ad(c),position:g}}\nfunction fw(a){kw(a,!0);a.a.qa()&&a.nb(!0);a.g.qa()&&a.ob(!0);kw(a,!0)}Z.prototype.ec=function(a,b){fw(this);tw(this,b);this.g.start(a,!!b)};Z.prototype.startInteraction=Z.prototype.ec;function tw(a,b){if(b){var c={};c.Ke=b.power;c.pe=b.ease;c.duration=b.duration;a.j=c}}function bw(a,b){return Jl(a,Jl(a,b-a.ab)+a.ab)}\nZ.prototype.Vb=function(a,b,c,d,e){var f=!1;this.g.qa()&&(b=this.g.store(a,b,c,d,e),this.g.sc(Hl.COORD)&&(a=this.g.Jd(),0<hm(a)&&(sw(this,-a.x,-a.y),f=!0)),b&&this.g.sc(Hl.ZOOM)&&(a=this.g.qf(),b=this.g.rf(),b=Dd(Fd(2,this.zoom)*b)/Nd,b!==this.zoom&&(b=bw(this,b),jw(this,b,a.x,a.y),f=!0)),f&&this.da())};Z.prototype.interaction=Z.prototype.Vb;\nZ.prototype.ob=function(a){var b=this;if(this.g.qa()&&!a){if(this.j){a=this.g.rb();var c=this.g.kc();var d=this.j.duration;var e=(this.j.Ke||1)*a;var f=new Lm(-e/(0<d?d:1),e);!E(c.x)&&!E(c.y)&&0<e&&b.g.sc(Hl.COORD)&&hw(this,function(g){e=f.xe(g*d);E(e)||sw(b,zd(-c.x*e),zd(-c.y*e))},d,void 0,this.j.pe)}this.j=null;this.g.clear()}};Z.prototype.endInteraction=Z.prototype.ob;Z.prototype.dc=function(a,b,c){fw(this);this.a.start(b,c);tw(this,a)};Z.prototype.startControl=Z.prototype.dc;\nZ.prototype.control=function(a,b,c){if(E(+c))throw new D(this.control,2,c);if(E(a))throw new D(this.control,0,a);if(E(b))throw new D(this.control,1,b);this.a.qa()&&this.a.set(a,b,c,0,0,0)};Z.prototype.control=Z.prototype.control;\nZ.prototype.nb=function(a,b){var c=this,d;if(this.a.qa()){kw(this,!0);var e=Jk();var f=e-this.Gj;if(1<=f){var g=tm(this.a);uw(this,g,f)}if(!this.j||a||b)\"function\"===typeof b&&(a=this.eb(),a.zoom=this.zoom-this.ab,b(a),a.zoom+=this.ab,vw(this,a));else{b=this.a.rb();var h=this.a.kc();var k=this.j.duration;var l=(this.j.Ke||1)*b;var m=new Lm(-l/(0<k?k:1),l);!E(h.a)&&!E(h.b)&&0<l&&hw(this,function(n,q,r,v){e&&(r=v-e,e=0);l=m.xe(n*k)*r;E(l)||((d=h.c*l)&&jw(c,bw(c,c.zoom+d),c.a.a,c.a.b),sw(c,zd(h.a*l),\nzd(h.b*l)))},k,void 0,this.j.pe)}this.a.reset()}};Z.prototype.endControl=Z.prototype.nb;\nfunction vw(a,b){var c=a.m,d=a.b.projection.Ic(b.position),e=a.b.Vd(d),f=e.y;e=e.x;var g=b.zoom;c=a.b.Vd(c);b=c.y;var h=c.x;c=a.zoom;var k=a.a.rb(),l=a.a.a,m=a.a.b,n=0;e=dw(a,h,e);e-=h;f-=b;c=g-c;b=Ed(e*e+f*f+c*c);if(0!==k&&0!==b){var q=e/b;var r=f/b;var v=c/b;var w=k*k/(2*b);hw(a,function(z,J){var I;if(1!==z){z=k*J-w*J*J/2;J=z-n;if(I=v*J)I=bw(a,a.zoom+I),jw(a,bw(a,I),l,m);sw(a,zd(q*J),zd(r*J));n=z}else a.m=d,jw(a,bw(a,g),l,m),a.Va(),a.da()},2*b/k)}}\nZ.prototype.$c=function(a){var b=this,c=a.b;this.I.set(0,0);c.a||c.b||c.c?(this.Gj=Jk(),hw(this,function(d,e,f,g){b.Gj=g;uw(b,c,f)},Number.POSITIVE_INFINITY),this.da()):kw(this,!0)};function uw(a,b,c){c=c||0;b.c&&jw(a,bw(a,a.zoom+b.c*c),a.a.atX,a.a.atY);sw(a,b.a*c,b.b*c)}function hw(a,b,c,d,e){a.i&&a.i.qa()&&a.i.stop(!0);a.i=new zm(a,b,c,d,e);a.i.start()}function kw(a,b){a.i&&a.i.qa()&&a.i.stop(b)}Z.prototype.Ig=function(){};Z.prototype.enter=Z.prototype.Ig;Z.prototype.Jg=function(a){Gl(this.oa,a)};\nZ.prototype.exit=Z.prototype.Jg;Z.prototype.capture=function(a,b,c,d){var e=this.oa.ownerDocument.createElement(\"canvas\"),f=e.getContext(\"2d\"),g=this.ma;e.width=(c-a)*g;e.height=(d-b)*g;for(c=0;c<this.s.length;c++)d=this.s[c],C(d,vm)&&f.drawImage(d.L(),-a*g,-b*g);return Zb(e)};var rw=0,qw=1,Zv=1E3,pw=256;\n");