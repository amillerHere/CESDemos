{"version":3,"file":"hds-profile-menu.js","sourceRoot":"","sources":["../src/hds-profile-menu.ts"],"names":[],"mappings":"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","sourcesContent":["import {customElement} from '@here/hds-base';\nimport '@here/hds-avatar';\nimport '@here/hds-icon';\nimport '@here/hds-list';\nimport {html, LitElement, nothing, PropertyValues} from 'lit';\nimport {property} from 'lit/decorators.js';\nimport {classMap} from 'lit/directives/class-map.js';\nimport {styles} from './hds-profile-menu.css.js';\n\nexport type ProfileMenuChangePayload = {open: boolean};\n\n/**\n * @slot default Content for the `hds-list-item` elements for the menu\n *\n * @event {CustomEvent<{open: boolean}>} change Fired when the menu state has changed: open / close `ProfileMenuChangePayload`\n */\n@customElement('hds-profile-menu')\nexport class ProfileMenu extends LitElement {\n  static styles = styles;\n\n  @property({type: String, attribute: 'profile-name'}) profileName = '';\n  @property({type: String, attribute: 'profile-email'}) profileEmail = '';\n  @property({type: String, attribute: 'avatar-image-url'}) avatarImageUrl = '';\n  @property({type: Boolean, attribute: 'open', reflect: true}) open = false;\n\n  private _handleDocumentClickRef;\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._handleDocumentClickRef = this._handleDocumentClick.bind(this);\n    this.ownerDocument.addEventListener('click', this._handleDocumentClickRef);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.ownerDocument.removeEventListener('click', this._handleDocumentClickRef);\n  }\n\n  protected updated(changedProperties: PropertyValues) {\n    if (changedProperties.has('open') && changedProperties.get('open') !== undefined) {\n      this.dispatchEvent(\n        new CustomEvent<ProfileMenuChangePayload>('change', {\n          detail: {\n            open: this.open,\n          },\n        })\n      );\n    }\n  }\n\n  protected renderAvatar(size) {\n    return html`\n      <hds-avatar\n        name=\"${this.profileName}\"\n        image-url=\"${this.avatarImageUrl}\"\n        size=\"${size}\"\n      ></hds-avatar>\n    `;\n  }\n\n  protected render() {\n    const menuClasses = {\n      'hds-profile-menu-show': this.open,\n    };\n    const loggedIn = this.profileName || this.profileEmail || this.avatarImageUrl;\n    // temporary measure for logged in User\n    return html`\n      <div class=\"hds-profile-menu-wrapper\">\n        <div class=\"hds-profile-menu-closed-avatar\" tabindex=\"0\" @click=\"${this._handleClick}\">\n          <span class=\"hds-avatar-wrapper\" aria-label=\"${this.profileName} profile\" role=\"button\">\n            ${this.renderAvatar('medium')}\n          </span>\n          <span class=\"hds-profile-menu-icon-wrapper\">\n            <hds-icon name=\"chevron-down\" size=\"8px\"></hds-icon>\n          </span>\n        </div>\n        <div class=\"hds-profile-menu ${classMap(menuClasses)}\">\n          ${(loggedIn &&\n            html` <div class=\"hds-profile-details\">\n              <span\n                class=\"hds-profile-details-avatar-wrapper\"\n                aria-label=\"${this.profileName} profile\"\n                role=\"button\"\n                tabindex=\"0\"\n              >\n                ${this.renderAvatar('large')}\n              </span>\n              <span class=\"hds-profile-details-text-container\">\n                <span class=\"hds-profile-details-text hds-profile-details-text--name\">\n                  ${this.profileName}\n                </span>\n                <span class=\"hds-profile-details-text hds-profile-details-text--email\">\n                  ${this.profileEmail}\n                </span>\n              </span>\n            </div>`) ||\n          nothing}\n          <slot></slot>\n        </div>\n      </div>\n    `;\n  }\n\n  private _handleDocumentClick() {\n    // e.preventDefault hasn't been added since this listener works on the entire document and shall not prevent default\n    if (this.open) {\n      this.open = false;\n    }\n  }\n\n  private _handleClick(e: Event) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.open = !this.open;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'hds-profile-menu': ProfileMenu;\n  }\n}\n"]}